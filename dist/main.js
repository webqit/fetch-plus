(()=>{var qo=Object.defineProperty;var Rn=(t,e)=>()=>(t&&(e=t(t=0)),e);var be=(t,e)=>{for(var r in e)qo(t,r,{get:e[r],enumerable:!0})};function Ln(t,e){return(e?/^[\x00-\xFF]*$/:/^[\x00-\x7F]*$/).test(t)}function yr(t,e=!1){let r=[],n=0;for(;n<t.length;){let o=t[n],s=v(function(f){if(!e)throw new TypeError(f);r.push({type:"INVALID_CHAR",index:n,value:t[n++]})},"ErrorOrInvalid");if(o==="*"){r.push({type:"ASTERISK",index:n,value:t[n++]});continue}if(o==="+"||o==="?"){r.push({type:"OTHER_MODIFIER",index:n,value:t[n++]});continue}if(o==="\\"){r.push({type:"ESCAPED_CHAR",index:n++,value:t[n++]});continue}if(o==="{"){r.push({type:"OPEN",index:n,value:t[n++]});continue}if(o==="}"){r.push({type:"CLOSE",index:n,value:t[n++]});continue}if(o===":"){let f="",i=n+1;for(;i<t.length;){let u=t.substr(i,1);if(i===n+1&&Ho.test(u)||i!==n+1&&Go.test(u)){f+=t[i++];continue}break}if(!f){s(`Missing parameter name at ${n}`);continue}r.push({type:"NAME",index:n,value:f}),n=i;continue}if(o==="("){let f=1,i="",u=n+1,a=!1;if(t[u]==="?"){s(`Pattern cannot start with "?" at ${u}`);continue}for(;u<t.length;){if(!Ln(t[u],!1)){s(`Invalid character '${t[u]}' at ${u}.`),a=!0;break}if(t[u]==="\\"){i+=t[u++]+t[u++];continue}if(t[u]===")"){if(f--,f===0){u++;break}}else if(t[u]==="("&&(f++,t[u+1]!=="?")){s(`Capturing groups are not allowed at ${u}`),a=!0;break}i+=t[u++]}if(a)continue;if(f){s(`Unbalanced pattern at ${n}`);continue}if(!i){s(`Missing pattern at ${n}`);continue}r.push({type:"REGEX",index:n,value:i}),n=u;continue}r.push({type:"CHAR",index:n,value:t[n++]})}return r.push({type:"END",index:n,value:""}),r}function xr(t,e={}){let r=yr(t);e.delimiter??="/#?",e.prefixes??="./";let n=`[^${F(e.delimiter)}]+?`,o=[],s=0,f=0,i="",u=new Set,a=v(m=>{if(f<r.length&&r[f].type===m)return r[f++].value},"tryConsume"),c=v(()=>a("OTHER_MODIFIER")??a("ASTERISK"),"tryConsumeModifier"),p=v(m=>{let w=a(m);if(w!==void 0)return w;let{type:_,index:k}=r[f];throw new TypeError(`Unexpected ${_} at ${k}, expected ${m}`)},"mustConsume"),h=v(()=>{let m="",w;for(;w=a("CHAR")??a("ESCAPED_CHAR");)m+=w;return m},"consumeText"),d=v(m=>m,"DefaultEncodePart"),l=e.encodePart||d,x="",b=v(m=>{x+=m},"appendToPendingFixedValue"),y=v(()=>{x.length&&(o.push(new ot(3,"","",l(x),"",3)),x="")},"maybeAddPartFromPendingFixedValue"),g=v((m,w,_,k,X)=>{let N=3;switch(X){case"?":N=1;break;case"*":N=0;break;case"+":N=2;break}if(!w&&!_&&N===3){b(m);return}if(y(),!w&&!_){if(!m)return;o.push(new ot(3,"","",l(m),"",N));return}let U;_?_==="*"?U=mr:U=_:U=n;let ht=2;U===n?(ht=1,U=""):U===mr&&(ht=0,U="");let xe;if(w?xe=w:_&&(xe=s++),u.has(xe))throw new TypeError(`Duplicate name '${xe}'.`);u.add(xe),o.push(new ot(ht,xe,l(m),U,l(k),N))},"addPart");for(;f<r.length;){let m=a("CHAR"),w=a("NAME"),_=a("REGEX");if(!w&&!_&&(_=a("ASTERISK")),w||_){let X=m??"";e.prefixes.indexOf(X)===-1&&(b(X),X=""),y();let N=c();g(X,w,_,"",N);continue}let k=m??a("ESCAPED_CHAR");if(k){b(k);continue}if(a("OPEN")){let X=h(),N=a("NAME"),U=a("REGEX");!N&&!U&&(U=a("ASTERISK"));let ht=h();p("CLOSE");let xe=c();g(X,N,U,ht,xe);continue}y(),p("END")}return o}function F(t){return t.replace(/([.+*?^${}()[\]|/\\])/g,"\\$1")}function dr(t){return t&&t.ignoreCase?"ui":"u"}function qn(t,e,r){return br(xr(t,r),e,r)}function Se(t){switch(t){case 0:return"*";case 1:return"?";case 2:return"+";case 3:return""}}function br(t,e,r={}){r.delimiter??="/#?",r.prefixes??="./",r.sensitive??=!1,r.strict??=!1,r.end??=!0,r.start??=!0,r.endsWith="";let n=r.start?"^":"";for(let i of t){if(i.type===3){i.modifier===3?n+=F(i.value):n+=`(?:${F(i.value)})${Se(i.modifier)}`;continue}e&&e.push(i.name);let u=`[^${F(r.delimiter)}]+?`,a=i.value;if(i.type===1?a=u:i.type===0&&(a=mr),!i.prefix.length&&!i.suffix.length){i.modifier===3||i.modifier===1?n+=`(${a})${Se(i.modifier)}`:n+=`((?:${a})${Se(i.modifier)})`;continue}if(i.modifier===3||i.modifier===1){n+=`(?:${F(i.prefix)}(${a})${F(i.suffix)})`,n+=Se(i.modifier);continue}n+=`(?:${F(i.prefix)}`,n+=`((?:${a})(?:`,n+=F(i.suffix),n+=F(i.prefix),n+=`(?:${a}))*)${F(i.suffix)})`,i.modifier===0&&(n+="?")}let o=`[${F(r.endsWith)}]|$`,s=`[${F(r.delimiter)}]`;if(r.end)return r.strict||(n+=`${s}?`),r.endsWith.length?n+=`(?=${o})`:n+="$",new RegExp(n,dr(r));r.strict||(n+=`(?:${s}(?=${o}))?`);let f=!1;if(t.length){let i=t[t.length-1];i.type===3&&i.modifier===3&&(f=r.delimiter.indexOf(i)>-1)}return f||(n+=`(?=${s}|${o})`),new RegExp(n,dr(r))}function kn(t,e){return t.length?t[0]==="/"?!0:!e||t.length<2?!1:(t[0]=="\\"||t[0]=="{")&&t[1]=="/":!1}function _r(t,e){return t.startsWith(e)?t.substring(e.length,t.length):t}function Nn(t,e){return t.endsWith(e)?t.substr(0,t.length-e.length):t}function wr(t){return!t||t.length<2?!1:t[0]==="["||(t[0]==="\\"||t[0]==="{")&&t[1]==="["}function vr(t){if(!t)return!0;for(let e of Fn)if(t.test(e))return!0;return!1}function Un(t,e){if(t=_r(t,"#"),e||t==="")return t;let r=new URL("https://example.com");return r.hash=t,r.hash?r.hash.substring(1,r.hash.length):""}function zn(t,e){if(t=_r(t,"?"),e||t==="")return t;let r=new URL("https://example.com");return r.search=t,r.search?r.search.substring(1,r.search.length):""}function Bn(t,e){return e||t===""?t:wr(t)?Er(t):Or(t)}function Vn(t,e){if(e||t==="")return t;let r=new URL("https://example.com");return r.password=t,r.password}function Wn(t,e){if(e||t==="")return t;let r=new URL("https://example.com");return r.username=t,r.username}function Hn(t,e,r){if(r||t==="")return t;if(e&&!Fn.includes(e))return new URL(`${e}:${t}`).pathname;let n=t[0]=="/";return t=new URL(n?t:"/-"+t,"https://example.com").pathname,n||(t=t.substring(2,t.length)),t}function Gn(t,e,r){return Pr(e)===t&&(t=""),r||t===""?t:Ar(t)}function Kn(t,e){return t=Nn(t,":"),e||t===""?t:Ft(t)}function Pr(t){switch(t){case"ws":case"http":return"80";case"wws":case"https":return"443";case"ftp":return"21";default:return""}}function Ft(t){if(t==="")return t;if(/^[-+.A-Za-z0-9]*$/.test(t))return t.toLowerCase();throw new TypeError(`Invalid protocol '${t}'.`)}function Jn(t){if(t==="")return t;let e=new URL("https://example.com");return e.username=t,e.username}function Xn(t){if(t==="")return t;let e=new URL("https://example.com");return e.password=t,e.password}function Or(t){if(t==="")return t;if(/[\t\n\r #%/:<>?@[\]^\\|]/g.test(t))throw new TypeError(`Invalid hostname '${t}'`);let e=new URL("https://example.com");return e.hostname=t,e.hostname}function Er(t){if(t==="")return t;if(/[^0-9a-fA-F[\]:]/g.test(t))throw new TypeError(`Invalid IPv6 hostname '${t}'`);return t.toLowerCase()}function Ar(t){if(t===""||/^[0-9]*$/.test(t)&&parseInt(t)<=65535)return t;throw new TypeError(`Invalid port '${t}'.`)}function Qn(t){if(t==="")return t;let e=new URL("https://example.com");return e.pathname=t[0]!=="/"?"/-"+t:t,t[0]!=="/"?e.pathname.substring(2,e.pathname.length):e.pathname}function Zn(t){return t===""?t:new URL(`data:${t}`).pathname}function Yn(t){if(t==="")return t;let e=new URL("https://example.com");return e.search=t,e.search.substring(1,e.search.length)}function eo(t){if(t==="")return t;let e=new URL("https://example.com");return e.hash=t,e.hash.substring(1,e.hash.length)}function gr(t,e){if(typeof t!="string")throw new TypeError("parameter 1 is not of type 'string'.");let r=new URL(t,e);return{protocol:r.protocol.substring(0,r.protocol.length-1),username:r.username,password:r.password,hostname:r.hostname,port:r.port,pathname:r.pathname,search:r.search!==""?r.search.substring(1,r.search.length):void 0,hash:r.hash!==""?r.hash.substring(1,r.hash.length):void 0}}function Q(t,e){return e?nt(t):t}function rt(t,e,r){let n;if(typeof e.baseURL=="string")try{n=new URL(e.baseURL),e.protocol===void 0&&(t.protocol=Q(n.protocol.substring(0,n.protocol.length-1),r)),!r&&e.protocol===void 0&&e.hostname===void 0&&e.port===void 0&&e.username===void 0&&(t.username=Q(n.username,r)),!r&&e.protocol===void 0&&e.hostname===void 0&&e.port===void 0&&e.username===void 0&&e.password===void 0&&(t.password=Q(n.password,r)),e.protocol===void 0&&e.hostname===void 0&&(t.hostname=Q(n.hostname,r)),e.protocol===void 0&&e.hostname===void 0&&e.port===void 0&&(t.port=Q(n.port,r)),e.protocol===void 0&&e.hostname===void 0&&e.port===void 0&&e.pathname===void 0&&(t.pathname=Q(n.pathname,r)),e.protocol===void 0&&e.hostname===void 0&&e.port===void 0&&e.pathname===void 0&&e.search===void 0&&(t.search=Q(n.search.substring(1,n.search.length),r)),e.protocol===void 0&&e.hostname===void 0&&e.port===void 0&&e.pathname===void 0&&e.search===void 0&&e.hash===void 0&&(t.hash=Q(n.hash.substring(1,n.hash.length),r))}catch{throw new TypeError(`invalid baseURL '${e.baseURL}'.`)}if(typeof e.protocol=="string"&&(t.protocol=Kn(e.protocol,r)),typeof e.username=="string"&&(t.username=Wn(e.username,r)),typeof e.password=="string"&&(t.password=Vn(e.password,r)),typeof e.hostname=="string"&&(t.hostname=Bn(e.hostname,r)),typeof e.port=="string"&&(t.port=Gn(e.port,t.protocol,r)),typeof e.pathname=="string"){if(t.pathname=e.pathname,n&&!kn(t.pathname,r)){let o=n.pathname.lastIndexOf("/");o>=0&&(t.pathname=Q(n.pathname.substring(0,o+1),r)+t.pathname)}t.pathname=Hn(t.pathname,t.protocol,r)}return typeof e.search=="string"&&(t.search=zn(e.search,r)),typeof e.hash=="string"&&(t.hash=Un(e.hash,r)),t}function nt(t){return t.replace(/([+*?:{}()\\])/g,"\\$1")}function ro(t){return t.replace(/([.+*?^${}()[\]|/\\])/g,"\\$1")}function no(t,e){e.delimiter??="/#?",e.prefixes??="./",e.sensitive??=!1,e.strict??=!1,e.end??=!0,e.start??=!0,e.endsWith="";let r=".*",n=`[^${ro(e.delimiter)}]+?`,o=/[$_\u200C\u200D\p{ID_Continue}]/u,s="";for(let f=0;f<t.length;++f){let i=t[f];if(i.type===3){if(i.modifier===3){s+=nt(i.value);continue}s+=`{${nt(i.value)}}${Se(i.modifier)}`;continue}let u=i.hasCustomName(),a=!!i.suffix.length||!!i.prefix.length&&(i.prefix.length!==1||!e.prefixes.includes(i.prefix)),c=f>0?t[f-1]:null,p=f<t.length-1?t[f+1]:null;if(!a&&u&&i.type===1&&i.modifier===3&&p&&!p.prefix.length&&!p.suffix.length)if(p.type===3){let h=p.value.length>0?p.value[0]:"";a=o.test(h)}else a=!p.hasCustomName();if(!a&&!i.prefix.length&&c&&c.type===3){let h=c.value[c.value.length-1];a=e.prefixes.includes(h)}a&&(s+="{"),s+=nt(i.prefix),u&&(s+=`:${i.name}`),i.type===2?s+=`(${i.value})`:i.type===1?u||(s+=`(${n})`):i.type===0&&(!u&&(!c||c.type===3||c.modifier!==3||a||i.prefix!=="")?s+="*":s+=`(${r})`),i.type===1&&u&&i.suffix.length&&o.test(i.suffix[0])&&(s+="\\"),s+=nt(i.suffix),a&&(s+="}"),i.modifier!==3&&(s+=Se(i.modifier))}return s}var Wo,v,ot,Ho,Go,mr,we,Ko,Jo,Fn,to,hr,_e,Ut,oo=Rn(()=>{Wo=Object.defineProperty,v=(t,e)=>Wo(t,"name",{value:e,configurable:!0}),ot=class{type=3;name="";prefix="";value="";suffix="";modifier=3;constructor(t,e,r,n,o,s){this.type=t,this.name=e,this.prefix=r,this.value=n,this.suffix=o,this.modifier=s}hasCustomName(){return this.name!==""&&typeof this.name!="number"}};v(ot,"Part");Ho=/[$_\p{ID_Start}]/u,Go=/[$_\u200C\u200D\p{ID_Continue}]/u,mr=".*";v(Ln,"isASCII");v(yr,"lexer");v(xr,"parse");v(F,"escapeString");v(dr,"flags");v(qn,"stringToRegexp");v(Se,"modifierToString");v(br,"partsToRegexp");we={delimiter:"",prefixes:"",sensitive:!0,strict:!0},Ko={delimiter:".",prefixes:"",sensitive:!0,strict:!0},Jo={delimiter:"/",prefixes:"/",sensitive:!0,strict:!0};v(kn,"isAbsolutePathname");v(_r,"maybeStripPrefix");v(Nn,"maybeStripSuffix");v(wr,"treatAsIPv6Hostname");Fn=["ftp","file","http","https","ws","wss"];v(vr,"isSpecialScheme");v(Un,"canonicalizeHash");v(zn,"canonicalizeSearch");v(Bn,"canonicalizeHostname");v(Vn,"canonicalizePassword");v(Wn,"canonicalizeUsername");v(Hn,"canonicalizePathname");v(Gn,"canonicalizePort");v(Kn,"canonicalizeProtocol");v(Pr,"defaultPortForProtocol");v(Ft,"protocolEncodeCallback");v(Jn,"usernameEncodeCallback");v(Xn,"passwordEncodeCallback");v(Or,"hostnameEncodeCallback");v(Er,"ipv6HostnameEncodeCallback");v(Ar,"portEncodeCallback");v(Qn,"standardURLPathnameEncodeCallback");v(Zn,"pathURLPathnameEncodeCallback");v(Yn,"searchEncodeCallback");v(eo,"hashEncodeCallback");to=class{#r;#t=[];#n={};#e=0;#s=1;#a=0;#i=0;#f=0;#h=0;#l=!1;constructor(t){this.#r=t}get result(){return this.#n}parse(){for(this.#t=yr(this.#r,!0);this.#e<this.#t.length;this.#e+=this.#s){if(this.#s=1,this.#t[this.#e].type==="END"){if(this.#i===0){this.#d(),this.#y()?this.#o(9,1):this.#x()?this.#o(8,1):this.#o(7,0);continue}else if(this.#i===2){this.#g(5);continue}this.#o(10,0);break}if(this.#f>0)if(this.#A())this.#f-=1;else continue;if(this.#E()){this.#f+=1;continue}switch(this.#i){case 0:this.#w()&&this.#g(1);break;case 1:if(this.#w()){this.#I();let t=7,e=1;this.#v()?(t=2,e=3):this.#l&&(t=2),this.#o(t,e)}break;case 2:this.#b()?this.#g(3):(this.#_()||this.#x()||this.#y())&&this.#g(5);break;case 3:this.#P()?this.#o(4,1):this.#b()&&this.#o(5,1);break;case 4:this.#b()&&this.#o(5,1);break;case 5:this.#S()?this.#h+=1:this.#T()&&(this.#h-=1),this.#O()&&!this.#h?this.#o(6,1):this.#_()?this.#o(7,0):this.#x()?this.#o(8,1):this.#y()&&this.#o(9,1);break;case 6:this.#_()?this.#o(7,0):this.#x()?this.#o(8,1):this.#y()&&this.#o(9,1);break;case 7:this.#x()?this.#o(8,1):this.#y()&&this.#o(9,1);break;case 8:this.#y()&&this.#o(9,1);break;case 9:break;case 10:break}}this.#n.hostname!==void 0&&this.#n.port===void 0&&(this.#n.port="")}#o(t,e){switch(this.#i){case 0:break;case 1:this.#n.protocol=this.#m();break;case 2:break;case 3:this.#n.username=this.#m();break;case 4:this.#n.password=this.#m();break;case 5:this.#n.hostname=this.#m();break;case 6:this.#n.port=this.#m();break;case 7:this.#n.pathname=this.#m();break;case 8:this.#n.search=this.#m();break;case 9:this.#n.hash=this.#m();break;case 10:break}this.#i!==0&&t!==10&&([1,2,3,4].includes(this.#i)&&[6,7,8,9].includes(t)&&(this.#n.hostname??=""),[1,2,3,4,5,6].includes(this.#i)&&[8,9].includes(t)&&(this.#n.pathname??=this.#l?"/":""),[1,2,3,4,5,6,7].includes(this.#i)&&t===9&&(this.#n.search??="")),this.#p(t,e)}#p(t,e){this.#i=t,this.#a=this.#e+e,this.#e+=e,this.#s=0}#d(){this.#e=this.#a,this.#s=0}#g(t){this.#d(),this.#i=t}#u(t){return t<0&&(t=this.#t.length-t),t<this.#t.length?this.#t[t]:this.#t[this.#t.length-1]}#c(t,e){let r=this.#u(t);return r.value===e&&(r.type==="CHAR"||r.type==="ESCAPED_CHAR"||r.type==="INVALID_CHAR")}#w(){return this.#c(this.#e,":")}#v(){return this.#c(this.#e+1,"/")&&this.#c(this.#e+2,"/")}#b(){return this.#c(this.#e,"@")}#P(){return this.#c(this.#e,":")}#O(){return this.#c(this.#e,":")}#_(){return this.#c(this.#e,"/")}#x(){if(this.#c(this.#e,"?"))return!0;if(this.#t[this.#e].value!=="?")return!1;let t=this.#u(this.#e-1);return t.type!=="NAME"&&t.type!=="REGEX"&&t.type!=="CLOSE"&&t.type!=="ASTERISK"}#y(){return this.#c(this.#e,"#")}#E(){return this.#t[this.#e].type=="OPEN"}#A(){return this.#t[this.#e].type=="CLOSE"}#S(){return this.#c(this.#e,"[")}#T(){return this.#c(this.#e,"]")}#m(){let t=this.#t[this.#e],e=this.#u(this.#a).index;return this.#r.substring(e,t.index)}#I(){let t={};Object.assign(t,we),t.encodePart=Ft;let e=qn(this.#m(),void 0,t);this.#l=vr(e)}};v(to,"Parser");hr=["protocol","username","password","hostname","port","pathname","search","hash"],_e="*";v(gr,"extractValues");v(Q,"processBaseURLString");v(rt,"applyInit");v(nt,"escapePatternString");v(ro,"escapeRegexpString");v(no,"partsToPattern");Ut=class{#r;#t={};#n={};#e={};#s={};#a=!1;constructor(t={},e,r){try{let n;if(typeof e=="string"?n=e:r=e,typeof t=="string"){let i=new to(t);if(i.parse(),t=i.result,n===void 0&&typeof t.protocol!="string")throw new TypeError("A base URL must be provided for a relative constructor string.");t.baseURL=n}else{if(!t||typeof t!="object")throw new TypeError("parameter 1 is not of type 'string' and cannot convert to dictionary.");if(n)throw new TypeError("parameter 1 is not of type 'string'.")}typeof r>"u"&&(r={ignoreCase:!1});let o={ignoreCase:r.ignoreCase===!0},s={pathname:_e,protocol:_e,username:_e,password:_e,hostname:_e,port:_e,search:_e,hash:_e};this.#r=rt(s,t,!0),Pr(this.#r.protocol)===this.#r.port&&(this.#r.port="");let f;for(f of hr){if(!(f in this.#r))continue;let i={},u=this.#r[f];switch(this.#n[f]=[],f){case"protocol":Object.assign(i,we),i.encodePart=Ft;break;case"username":Object.assign(i,we),i.encodePart=Jn;break;case"password":Object.assign(i,we),i.encodePart=Xn;break;case"hostname":Object.assign(i,Ko),wr(u)?i.encodePart=Er:i.encodePart=Or;break;case"port":Object.assign(i,we),i.encodePart=Ar;break;case"pathname":vr(this.#t.protocol)?(Object.assign(i,Jo,o),i.encodePart=Qn):(Object.assign(i,we,o),i.encodePart=Zn);break;case"search":Object.assign(i,we,o),i.encodePart=Yn;break;case"hash":Object.assign(i,we,o),i.encodePart=eo;break}try{this.#s[f]=xr(u,i),this.#t[f]=br(this.#s[f],this.#n[f],i),this.#e[f]=no(this.#s[f],i),this.#a=this.#a||this.#s[f].some(a=>a.type===2)}catch{throw new TypeError(`invalid ${f} pattern '${this.#r[f]}'.`)}}}catch(n){throw new TypeError(`Failed to construct 'URLPattern': ${n.message}`)}}get[Symbol.toStringTag](){return"URLPattern"}test(t={},e){let r={pathname:"",protocol:"",username:"",password:"",hostname:"",port:"",search:"",hash:""};if(typeof t!="string"&&e)throw new TypeError("parameter 1 is not of type 'string'.");if(typeof t>"u")return!1;try{typeof t=="object"?r=rt(r,t,!1):r=rt(r,gr(t,e),!1)}catch{return!1}let n;for(n of hr)if(!this.#t[n].exec(r[n]))return!1;return!0}exec(t={},e){let r={pathname:"",protocol:"",username:"",password:"",hostname:"",port:"",search:"",hash:""};if(typeof t!="string"&&e)throw new TypeError("parameter 1 is not of type 'string'.");if(typeof t>"u")return;try{typeof t=="object"?r=rt(r,t,!1):r=rt(r,gr(t,e),!1)}catch{return null}let n={};e?n.inputs=[t,e]:n.inputs=[t];let o;for(o of hr){let s=this.#t[o].exec(r[o]);if(!s)return null;let f={};for(let[i,u]of this.#n[o].entries())if(typeof u=="string"||typeof u=="number"){let a=s[i+1];f[u]=a}n[o]={input:r[o]??"",groups:f}}return n}static compareComponent(t,e,r){let n=v((i,u)=>{for(let a of["type","modifier","prefix","value","suffix"]){if(i[a]<u[a])return-1;if(i[a]!==u[a])return 1}return 0},"comparePart"),o=new ot(3,"","","","",3),s=new ot(0,"","","","",3),f=v((i,u)=>{let a=0;for(;a<Math.min(i.length,u.length);++a){let c=n(i[a],u[a]);if(c)return c}return i.length===u.length?0:n(i[a]??o,u[a]??o)},"comparePartList");return!e.#e[t]&&!r.#e[t]?0:e.#e[t]&&!r.#e[t]?f(e.#s[t],[s]):!e.#e[t]&&r.#e[t]?f([s],r.#s[t]):f(e.#s[t],r.#s[t])}get protocol(){return this.#e.protocol}get username(){return this.#e.username}get password(){return this.#e.password}get hostname(){return this.#e.hostname}get port(){return this.#e.port}get pathname(){return this.#e.pathname}get search(){return this.#e.search}get hash(){return this.#e.hash}get hasRegExpGroups(){return this.#a}};v(Ut,"URLPattern")});var so={};be(so,{URLPattern:()=>Ut});var io=Rn(()=>{oo();globalThis.URLPattern||(globalThis.URLPattern=Ut)});var Cn={};be(Cn,{FormDataPlus:()=>ee,HeadersPlus:()=>re,LiveResponse:()=>ar,Observer:()=>Po,RequestPlus:()=>Xt,ResponsePlus:()=>ne,fetchPlus:()=>_o});function E(t){return!Array.isArray(t)&&typeof t=="object"&&t}function Xe(t){return typeof t}function z(t){return Array.isArray(t)}function qt(t){return t===!0||t===!1}function Qe(t){return typeof t=="function"}function fr(t){return t===null||t===""}function Ee(t){return arguments.length&&(t===void 0||typeof t>"u")}function O(t){return Array.isArray(t)||typeof t=="object"&&t||Qe(t)}function ur(t){return fr(t)||Ee(t)||t===!1||t===0||O(t)&&!Object.keys(t).length}function ie(t){return Qe(t)||t&&{}.toString.call(t)==="[object function]"}function Ze(t){return t instanceof Number||typeof t=="number"}function Ye(t){return Ze(t)||t!==!0&&t!==!1&&t!==null&&t!==""&&!isNaN(t*1)}function cr(t){return z(t)&&Object.getPrototypeOf(t)===Array.prototype}function lr(t){return E(t)&&Object.getPrototypeOf(t)===Object.prototype}function et(t){return t instanceof String||typeof t=="string"&&t!==null}function pr(t){return!et(t)&&!Ee(t.length)}function Ae(t,...e){if(!t||!["object","function"].includes(typeof t))throw new Error("Argument #1 must be of type object");let r=t[Symbol.for("wq")];if(r||(r=new kt,Object.defineProperty(t,Symbol.for("wq"),{value:r,enumerable:!1,configurable:!1,writable:!1})),!e.length)return r;let n,o;for(;n=e.shift();)(o=r)&&!(r=r.get(n))&&(r=new kt,o.set(n,r));return r}var kt=class extends Map{};function tt(t,e,r=!1){if(e=="")return t;var n=r?t.lastIndexOf(e):t.indexOf(e);return n===-1?"":t.substr(n+e.length)}function Nt(t,e,r=!1){if(e=="")return t;var n=r?t.lastIndexOf(e):t.indexOf(e);return n===-1?t:t.substr(0,n)}(async()=>typeof URLPattern>"u"&&await Promise.resolve().then(()=>(io(),so)))();var Sr=class extends URLPattern{#r;constructor(e,r=null){typeof e=="object"&&e?.baseURL&&({baseURL:r,...e}=e),super(e,r),this.#r=new URL(e,r)}isPattern(){let e=(o,s)=>{if(!o)return!1;let f=!1;for(let i of o){if(f){f=!1;continue}if(i==="\\"){f=!0;continue}if(s.has(i))return!0}return!1},r={protocol:new Set(["*"]),username:new Set(["*"]),password:new Set(["*"]),hostname:new Set(["*","{"]),port:new Set(["*","{"]),pathname:new Set(["*",":","{","("]),search:new Set(["*","{"]),hash:new Set(["*","{"])},n=this.#r;return e(n.protocol,r.protocol)||e(n.username,r.username)||e(n.password,r.password)||e(n.hostname,r.hostname)||e(n.port,r.port)||e(n.pathname,r.pathname)||e(n.search,r.search)||e(n.hash,r.hash)}exec(...e){let r=super.exec(...e);if(!r)return;let n={};for(let f of Object.values(r))f?.groups&&Object.assign(n,f.groups);let o={named:n};return{...r,vars:o,render:f=>f.replace(/\$(\$|[A-Z0-9_]+)/gi,(i,u)=>u==="$"?"$":o.named[u]??"")}}};function A(t){return!Array.isArray(t)&&typeof t=="object"&&t}function st(t){return typeof t}function V(t){return Array.isArray(t)}function it(t){return typeof t=="function"}function Tr(t){return t===null||t===""}function Te(t){return arguments.length&&(t===void 0||typeof t>"u")}function M(t){return Array.isArray(t)||typeof t=="object"&&t||it(t)}function Ir(t){return Tr(t)||Te(t)||t===!1||t===0||M(t)&&!Object.keys(t).length}function ae(t){return it(t)||t&&{}.toString.call(t)==="[object function]"}function zt(t){return t instanceof Number||typeof t=="number"}function Ie(t){return zt(t)||t!==!0&&t!==!1&&t!==null&&t!==""&&!isNaN(t*1)}function je(t){return t instanceof String||typeof t=="string"&&t!==null}function jr(t){return!je(t)&&!Te(t.length)}function Vt(t,...e){if(!t||!["object","function"].includes(typeof t))throw new Error("Argument #1 must be of type object");let r=t[Symbol.for("wq")];if(r||(r=new Bt,Object.defineProperty(t,Symbol.for("wq"),{value:r,enumerable:!1,configurable:!1,writable:!1})),!e.length)return r;let n,o;for(;n=e.shift();)(o=r)&&!(r=r.get(n))&&(r=new Bt,o.set(n,r));return r}var Bt=class extends Map{};var Wr={};be(Wr,{any:()=>ds,apply:()=>Nr,batch:()=>Vr,construct:()=>kr,defineProperties:()=>bs,defineProperty:()=>yt,deleteProperties:()=>_s,deleteProperty:()=>xt,get:()=>ce,getOwnPropertyDescriptor:()=>Ht,getOwnPropertyDescriptors:()=>ys,getPrototypeOf:()=>$r,has:()=>Gt,intercept:()=>gs,isExtensible:()=>Lr,map:()=>xs,observe:()=>Br,ownKeys:()=>qr,path:()=>hs,preventExtensions:()=>Ur,reduce:()=>zr,set:()=>Re,setPrototypeOf:()=>Fr,subtree:()=>ms});function ve(t,e=!0){return V(t)?t:!e&&A(t)?[t]:t!==!1&&t!==0&&Ir(t)?[]:jr(t)?Array.prototype.slice.call(t):A(t)?Object.values(t):[t]}var S=(t,...e)=>Vt(t,"observerAPI",...e),at=(t,e)=>t instanceof Promise?t.then(e):e(t),Wt={};var Me=class{constructor(e,r){this.registry=e,Object.assign(this,{...r,target:e.target}),this.params.signal&&this.params.signal.addEventListener("abort",()=>this.remove())}remove(){return this.removed=!0,this.registry.removeRegistration(this)}};var mt=class extends Me{constructor(){super(...arguments),this.emit.currentRegistration=this,Object.defineProperty(this,"abortController",{value:new AbortController}),Object.defineProperty(this,"signal",{value:this.abortController.signal}),Wt.setMaxListeners?.(0,this.signal)}remove(){this.abortController.abort(),super.remove()}fire(e){if(this.emit.recursionTarget&&!["inject","force-async","force-sync"].includes(this.params.recursions))return;let r=e,n=this.filter;if(n!==1/0&&(n=ve(n,!1))&&(r=e.filter(s=>n.includes(s.key))),this.params.diff&&(r=r.filter(s=>s.type!=="set"||s.value!==s.oldValue)),!r.length)return;if(["inject","defer"].includes(this.params.recursions)){if(this.emit.recursionTarget){this.emit.recursionTarget.push(...r);return}this.emit.recursionTarget=this.params.recursions==="inject"?r:[]}let o=this.filter===1/0||Array.isArray(this.filter)?this.emit(r,this):this.emit(r[0],this);return at(o,s=>{let f=this.emit.recursionTarget;return delete this.emit.recursionTarget,this.params.recursions==="defer"&&f?.length?this.emit.currentRegistration.fire(f):s})}};var Ce=class{constructor(e){this.target=e,this.entries=[]}addRegistration(e){return this.entries.push(e),e}removeRegistration(e){this.entries=this.entries.filter(r=>r!==e)}static _getInstance(e,r,n=!0,o=this.__namespace){if(!M(r))throw new Error(`Subject must be of type object; "${st(r)}" given!`);let s=this;return o&&S(globalThis,"observerAPI","namespaces").has(e+"-"+o)&&(s=S(globalThis,"observerAPI","namespaces").get(e+"-"+o),e+="-"+o),!S(r,"registry").has(e)&&n&&S(r,"registry").set(e,new s(r)),S(r,"registry").get(e)}static _namespace(e,r,n=null){if(e+="-"+r,arguments.length===2)return S(globalThis,"observerAPI","namespaces").get(e);if(!(n.prototype instanceof this))throw new Error(`The implementation of the namespace ${this.name}.${r} must be a subclass of ${this.name}.`);S(globalThis,"observerAPI","namespaces").set(e,n),n.__namespace=r}};var D=class{constructor(e,r){if(this.target=e,!r.operation)throw new Error("Descriptor operation must be given in definition!");Object.assign(this,r)}get[Symbol.toStringTag](){return"Descriptor"}static[Symbol.hasInstance](e){return e?.[Symbol.toStringTag]==="Descriptor"&&e.operation}};var fe=class extends Ce{static getInstance(e,r=!0,n=null){return super._getInstance("listeners",...arguments)}static namespace(e,r=null){return super._namespace("listeners",...arguments)}constructor(e){super(e),this.batches=[]}addRegistration(e,r,n){return super.addRegistration(new mt(this,{filter:e,emit:r,params:n}))}emit(e,{eventsArePropertyDescriptors:r=!1,eventIsArrayMethodDescriptor:n=!1}={}){if(this.batches.length){let o=this.batches[0].params.arrayMethodName;this.batches[0].snapshots.push({events:[...e],arrayMethodName:o,eventsArePropertyDescriptors:r,eventIsArrayMethodDescriptor:n});return}this.$emit(this.entries,[{events:e,eventsArePropertyDescriptors:r,eventIsArrayMethodDescriptor:n}])}$emit(e,r){let n=0,o=0,s=0;for(let c of e)n+=1,c.params.withPropertyDescriptors&&(o+=1),c.params.withArrayMethodDescriptors&&(s+=1);let f=[],i=[],u=[],a=[];for(let c of r){let p=c.arrayMethodName,h=c.eventsArePropertyDescriptors,d=c.eventIsArrayMethodDescriptor;for(let l of c.events)if(p&&(l.operation=p),o&&(s&&f.push(l),d||s!==n&&i.push(l)),o!==n){let x=l;if(h){let{target:b,type:y,...g}=l;x=new D(b,{type:"set",...g}),Object.defineProperty(x,"value","get"in g.value?{get:()=>g.value.get()}:{value:g.value.value}),g.oldValue&&Object.defineProperty(x,"oldValue","get"in g.oldValue?{get:()=>g.oldValue.get()}:{value:g.oldValue.value})}s&&u.push(x),d||s!==n&&a.push(x)}}for(let c of e)c.params.withPropertyDescriptors?c.params.withArrayMethodDescriptors?f.length&&c.fire(f):i.length&&c.fire(i):c.params.withArrayMethodDescriptors?u.length&&c.fire(u):a.length&&c.fire(a)}batch(e,r={}){this.batches.unshift({entries:[...this.entries],snapshots:[],params:r});let n=e();return at(n,o=>{let s=this.batches.shift();return s.snapshots.length&&this.$emit(s.entries,s.snapshots),o})}};var dt=class extends Me{exec(e,r,n){return this.running||!this.traps[e.operation]?r(...Array.prototype.slice.call(arguments,2)):(this.running=!0,this.traps[e.operation](e,n,(...o)=>(this.running=!1,r(...o))))}};var ue=class extends Ce{static getInstance(e,r=!0,n=null){return super._getInstance("traps",...arguments)}static namespace(e,r=null){return super._namespace("traps",...arguments)}addRegistration(e){return super.addRegistration(new dt(this,e))}emit(e,r=null){let n=this;return function o(s,...f){let i=n.entries[s];return i?i.exec(e,(...u)=>o(s+1,...u),...f):r?r(e,...f):f[0]}(0)}};var Dr={};be(Dr,{accessorize:()=>ls,proxy:()=>Cr,unaccessorize:()=>ps,unproxy:()=>gt});var lo=Symbol("wqOriginal");function ls(t,e,r={}){t=Rr(t);let n=S(t,"accessorizedProps");function o(u){let a,c=t;do a=Object.getOwnPropertyDescriptor(c,u);while(!a&&(c=Object.getPrototypeOf(c)));return a?{proto:c,descriptor:a}:{descriptor:{value:void 0,configurable:!0,enumerable:!0,writable:!0}}}function s(u){if(n.has(u+""))return!0;let a=o(u);a.getValue=function(h=!1){return h?this.descriptor:this.descriptor.get?this.descriptor.get():this.descriptor.value},a.setValue=function(h,d=!1){if(this.dirty=!0,d){this.descriptor=h;return}return this.descriptor.set?this.descriptor.set(h)!==!1:(this.descriptor.value=h,!0)},a.intact=function(){let h=Object.getOwnPropertyDescriptor(t,u);return h?.get===p.get&&h?.set===p.set&&n.get(u+"")===this},a.restore=function(){return this.intact()?(this.proto&&this.proto!==t||!this.proto&&!this.dirty?delete t[u]:Object.defineProperty(t,u,this.descriptor),n.delete(u+""),!0):!1},n.set(isNaN(u)?u:parseInt(u),a);let{enumerable:c=!0}=a.descriptor,p={enumerable:c,configurable:!0};("value"in a.descriptor||a.descriptor.set)&&(p.set=function(h){return Re(this,u,h,r)}),("value"in a.descriptor||a.descriptor.get)&&(p.get=function(){return ce(this,u,r)});try{return Object.defineProperty(t,u,p),!0}catch{return n.delete(u+""),!1}}let i=(Array.isArray(e)?e:e===void 0?Object.keys(t):[e]).map(s);return e===void 0||Array.isArray(e)?i:i[0]}function ps(t,e,r={}){t=Rr(t);let n=S(t,"accessorizedProps");function o(i){return n.has(i+"")?n.get(i+"").restore():!0}let f=(Array.isArray(e)?e:e===void 0?Object.keys(t):[e]).map(o);return e===void 0||Array.isArray(e)?f:f[0]}function Cr(t,e={},r=void 0){let n=Rr(t);if(typeof e.membrane=="boolean")throw new Error("The params.membrane parameter cannot be of type boolean.");if(e.membrane&&S(n,"membraneRef").has(e.membrane))return S(n,"membraneRef").get(e.membrane);let o={apply:(i,u,a)=>Nr(i,u,a,void 0,e),construct:(i,u,a=null)=>kr(i,u,a,e),defineProperty:(i,u,a)=>yt(i,u,a,e),deleteProperty:(i,u)=>xt(i,u,e),get:(i,u,a=null)=>{if(u===lo)return n;let c={...e,receiver:a},p=ce(i,u,c);return Array.isArray(i)&&typeof p=="function"&&!/^class\s?/.test(Function.prototype.toString.call(p))?Cr(p,{...e,arrayMethodName:u,membrane:a},r):e.chainable&&M(p)&&u!=="prototype"&&!(typeof p=="function"&&/^class\s?|\{\s\[native\scode\]\s\}$/.test(Function.prototype.toString.call(p)))?Cr(p,e,r):p},getOwnPropertyDescriptor:(i,u)=>Ht(i,u,e),getPrototypeOf:i=>$r(i,e),has:(i,u)=>Gt(i,u,e),isExtensible:i=>Lr(i,e),ownKeys:i=>qr(i,e),preventExtensions:i=>Ur(i,e),set:(i,u,a,c=null)=>Re(i,u,a,{...e,receiver:c}),setPrototypeOf:(i,u)=>Fr(i,u,e)},s=r?.(o)||o,f=new Proxy(n,s);return e.membrane&&S(n,"membraneRef").set(e.membrane,f),f}function gt(t){return t&&t[lo]||t}function Rr(t){if(!t||!M(t))throw new Error("Target must be of type object!");return gt(t)}var bt=class extends Array{get[Symbol.toStringTag](){return"Path"}static[Symbol.hasInstance](e){return Array.isArray(e)&&e[Symbol.toStringTag]==="Path"}};function hs(...t){return new bt(...t)}var De=class extends Array{get[Symbol.toStringTag](){return"Subtree"}static[Symbol.hasInstance](e){return Array.isArray(e)&&e[Symbol.toStringTag]==="Subtree"}};function ms(){return new De}function ds(){return 1/0}function zr(t,e,r,n=s=>s,o={}){let s=e instanceof De;if(!(!s&&!e?.length))return function f(i,u,a,c){let p=c||u[a.level]instanceof De,h=p?1/0:u[a.level],d=p?!1:a.level===u.length-1;return i instanceof D&&i.operation!=="get"?a={...a,probe:"always"}:a.probe!=="always"&&(a={...a,probe:!d}),r(i,h,(l,...x)=>{let b=m=>{m instanceof D&&(m.path="key"in m?[m.key]:[],i instanceof D&&(m.path="key"in m?i.path.concat(m.key):i.path.slice(0),Object.defineProperty(m,"context",{get:()=>i,configurable:!0})))},y=x[0]||{},g=m=>{if(m instanceof D&&"argumentsList"in m)return;let w=Z(m,!1);return at(w,_=>(m instanceof D?m.value=_:m=_,f(m,u,{...a,...y,keyInParent:m.key,level:a.level+1},p)))};if(_t(h)&&Array.isArray(l)){if(l.forEach(b),d)return n(l,...x);p&&l[0]instanceof D&&(l[0].operation!=="get"||o.asGet)&&n(l,...x);for(let m of l)g(m);return}return b(l),d?n(l,...x):g(l)},a)}(t,e.slice(0),{...o,level:0},s)}function Br(t,e,r,n={}){let o=Z(t,!n.level);if(ae(arguments[1])&&([,r,n={}]=arguments,e=1/0),!ae(r))throw new Error(`Handler must be a function; "${st(r)}" given!`);if(e instanceof bt||e instanceof De)return zr(o,e,Br,r,n);if(n={...n,descripted:!0},delete n.live,!M(o))return n.probe&&ce(o,e,r,n)||void 0;let s=po(o,e,r,n);return n.probe?ce(o,e,s,n):s()}function gs(t,e,r={}){let n=Z(t);return A(e)||([,,,r={}]=arguments,e={[arguments[1]]:arguments[2]}),ue.getInstance(n,!0,r.namespace).addRegistration({traps:e,params:r})}function Ht(t,e,r=o=>o,n={}){return W(t,"getOwnPropertyDescriptor",{key:e},r,n)}function ys(t,e,r=o=>o,n={}){return W(t,"getOwnPropertyDescriptors",{key:e},r,n)}function $r(t,e=n=>n,r={}){return W(t,"getPrototypeOf",{},e,r)}function Lr(t,e=n=>n,r={}){return W(t,"isExtensible",{},e,r)}function qr(t,e=n=>n,r={}){return W(t,"ownKeys",{},e,r)}function Gt(t,e,r=o=>o,n={}){return W(t,"has",{key:e},r,n)}function ce(t,e,r=o=>o,n={}){let o,s=Z(t,!n.level);return A(r)?[n,r]=[r,f=>f]:n.live&&(o=!0),e instanceof bt||e instanceof De?zr(s,e,ce,r,{...n,asGet:!0}):ws(s,e,f=>{let i=[...f];return function u(a,c,p){if(!c.length)return p(a);let h=c.shift();if(!["string","number","symbol"].includes(typeof h))throw new Error(`Property name/key ${h} invalid.`);function d(b,y=void 0){let g=_=>(b.value=_,u([...a,n.live||n.descripted?b:_],c,p));if(arguments.length>1)return g(y);if(!M(s))return g(s?.[b.key]);let m=S(s,"accessorizedProps",!1),w=m&&m.get(b.key);if(w&&w.intact())return g(w.getValue(n.withPropertyDescriptors));if(n.withPropertyDescriptors){let _=Object.getOwnPropertyDescriptor(s,b.key);return g(_)}return g(Reflect.get(s,b.key))}let l=new D(s,{type:"get",key:h,value:void 0,operation:"get",related:i});if(!M(s))return d(l);let x=ue.getInstance(s,!1,n.namespace);return x?x.emit(l,d):d(l)}([],f.slice(0),u=>{let a=_t(e)?u:u[0];return o&&M(s)?po(s,e,r,n,t.key)(a):r(a)})},n)}function Vr(t,e,r={}){let n=Z(t);return fe.getInstance(n,!0,r.namespace).batch(e,r)}function xs(t,e,r={}){e=Z(e),t=Z(t);let n=(r.only||[]).slice(0),o=(r.except||[]).slice(0),s=Object.keys(r.spread?[...t]:t).map(a=>isNaN(a)?a:parseInt(a)),f=n.length?n.filter(a=>s.includes(a)):s.filter(a=>!o.includes(a)),i=a=>!Array.isArray(e)||isNaN(a)?a:a-o.filter(c=>c<a).length,u=a=>{let c=Ht(t,a,r);"value"in c&&c.writable&&c.enumerable&&c.configurable?Re(e,i(a),c.value,r):(c.enumerable||r.onlyEnumerable===!1)&&yt(e,a,{...c,configurable:!0},r)};return Vr(e,()=>{f.forEach(u)}),Br(t,a=>{a.filter(c=>n.length?n.includes(c.key):!o.includes(c.key)).forEach(c=>{if(c.type==="delete")return xt(e,i(c.key),r);if(c.type==="def"){(c.value.enumerable||r.onlyEnumerable===!1)&&yt(e,i(c.key),{...c.value,configurable:!0},r);return}u(c.key)})},{...r,withPropertyDescriptors:!0})}function Re(t,e,r,n=f=>f,o={},s=!1){let f=Z(t),i=[[e,r]];A(e)&&([,,n=a=>a,o={},s=!1]=arguments,i=Object.entries(e)),A(n)&&([s,o,n]=[typeof o=="boolean"?o:s,n,a=>a]);let u=i.map(([a])=>a);return function a(c,p,h){if(!p.length)return h(c);let[d,l]=p.shift();function x(y,g=void 0){let m=k=>(y.status=k,a(c.concat(y),p,h));if(arguments.length>1)return m(y,g);let w=S(f,"accessorizedProps",!1),_=w&&w.get(y.key);return y.type==="def"?(_&&!_.restore()&&m(!1),Object.defineProperty(f,y.key,y.value),m(!0)):_&&_.intact()?m(_.setValue(y.value)):m(Reflect.set(f,y.key,y.value))}function b(y,g){if(o.diff&&l===g)return a(c,p,h);let m=new D(f,{type:s?"def":"set",key:d,value:l,isUpdate:y,oldValue:g,related:[...u],operation:s?"defineProperty":"set",detail:o.detail}),w=ue.getInstance(f,!1,o.namespace);return w?w.emit(m,x):x(m)}return Gt(f,d,y=>{if(!y)return b(y);if(d==="length"&&Array.isArray(f)&&S(f).has("$length"))return b(!0,S(f).get("$length"));let g={...o,withPropertyDescriptors:s};return ce(f,d,m=>b(y,m),g)},o)}([],i.slice(0),a=>{let c=fe.getInstance(f,!1,o.namespace);return c&&c.emit(a,{eventsArePropertyDescriptors:!!s}),n(_t(e)?a.map(p=>p.status):a[0]?.status)})}function yt(t,e,r,n=s=>s,o={}){return Re(t,e,r,n,o,!0)}function bs(t,e,r=o=>o,n={}){return Re(t,e,r,n,!0)}function xt(t,e,r=o=>o,n={}){let o=Z(t);A(r)&&([n,r]=[r,i=>i]);let s=ve(e,!1),f=[...s];return function i(u,a,c){if(!a.length)return c(u);let p=a.shift();function h(l,x=void 0){let b=m=>(l.status=m,i(u.concat(l),a,c));if(arguments.length>1)return b(l,x);let y=S(o,"accessorizedProps",!1),g=y&&y.get(l.key);return g&&!g.restore()&&b(!1),b(Reflect.deleteProperty(o,l.key))}function d(l){let x=new D(o,{type:"delete",key:p,oldValue:l,related:[...f],operation:"deleteProperty",detail:n.detail}),b=ue.getInstance(o,!1,n.namespace);return b?b.emit(x,h):h(x)}return ce(o,p,d,n)}([],s.slice(0),i=>{let u=fe.getInstance(o,!1,n.namespace);return u&&u.emit(i),r(_t(e)?i.map(a=>a.status):i[0].status)})}function _s(t,e,r=o=>o,n={}){return xt(...arguments)}function kr(t,e,r=null,n=s=>s,o={}){return W(t,"construct",arguments.length>2?{argumentsList:e,newTarget:r}:{argumentsList:e},n,o)}function Nr(t,e,r,n=s=>s,o={}){let s=gt(e),f;if(Array.isArray(e)){if(o.arrayMethodName){let i=new D(s,{operation:o.arrayMethodName,argumentsList:r});fe.getInstance(s,!1,o.namespace)?.emit([i],{eventIsArrayMethodDescriptor:!0})}S(s).set("$length",s.length),f=Vr(s,()=>W(t,"apply",{thisArgument:e,argumentsList:r},n,o),o),S(s).delete("$length")}else f=W(t,"apply",{thisArgument:s,argumentsList:r},n,o);return f}function Fr(t,e,r=o=>o,n={}){return W(t,"setPrototypeOf",{proto:e},r,n)}function Ur(t,e=n=>n,r={}){return W(t,"preventExtensions",{},e,r)}function po(t,e,r,n={}){let o=new AbortController;Wt.setMaxListeners?.(0,o.signal),n.signal&&n.signal.addEventListener("abort",()=>o.abort());let s={...n,signal:o.signal},f=fe.getInstance(t,!0,s.namespace),i=new Map;return function u(a=[],c=null){let p,h,d;if(_t(e)){if(c){d=!0,h=c;for(let l of a)i.get(l.key)?.remove(),i.delete(l.key)}else h=f.addRegistration(e,u,s);p={signal:h.signal,childRegistrations:i}}else c?.remove(),h=f.addRegistration(e,u,s),p={signal:h.signal};if(s.childRegistrations&&s.keyInParent&&s.childRegistrations.set(s.keyInParent,h),arguments.length){let l=r(a,p);if(arguments.length>1)return l}return o}}function W(t,e,r={},n=s=>s,o={}){t=Z(t),A(n)&&([o,n]=[n,u=>u]);function s(u,a){return arguments.length>1?n(a):n((Reflect[e]||Object[e])(t,...Object.values(r)))}let f=new D(t,{operation:e,...r}),i=ue.getInstance(t,!1,o.namespace);return i?i.emit(f,s):s(f)}function _t(t){return t===1/0||Array.isArray(t)}function Z(t,e=!0,r=!0){if((!t||!M(t))&&e)throw new Error(`Object must be of type object or array! "${st(t)}" given.`);return t instanceof D&&(t.type==="def"&&r?t=typeof t.value.get=="function"?t.value.get():t.value.value:t=t.value),t&&gt(t)}function ws(t,e,r,n={}){return e===1/0?n.level&&!M(t)?r([]):r(Object.entries(Object.getOwnPropertyDescriptors(t)).filter(([,o])=>o.writable!==!1&&!o.get&&!o.set).map(([o])=>o)):r(ve(e,!1))}var Y={...Wr,...Dr};var $e=class t extends URLSearchParams{#r;#t;get compatMode(){return this.#t}#n=new Set;#e;#s=!1;#a;_changeCallbackGC;constructor(e={},{compatMode:r=!0,prettyPrint:n=!1,changeCallback:o=null}={}){super(),this.#t=r,this.#e=n;let s;e instanceof t?(s=structuredClone(e.json()),r&&(this.#n=new Set(e.keys()))):e instanceof URLSearchParams||e instanceof FormData?(s=Object.fromEntries(e),r&&(this.#n=new Set(e.keys()))):je(e)?(e=decodeURIComponent(e.replace(/^\?/,"")),s=this.constructor.parse(e,!r),r&&(this.#n=new Set(e.split("&").map(f=>f.split("=")[0])))):Array.isArray(e)?(s=this.constructor.fromEntries(e),r&&(this.#n=new Set(e.map(([f])=>f)))):A(e)?(s=e,r&&this.constructor.reduceValue(e,"",(f,i,u)=>{if(u)return u;/\[\d+\]$/.test(i)&&([,i]=/^(.*)\[\d+\]$/.exec(i)),this.#n.add(i)})):s={},this._changeCallback=o,this._resetJson(s)}_resetJson(e){this.#r=Y.proxy(e),this.#a&&(this._changeCallbackGC?.abort(),this._changeCallbackGC=Y.observe(this.#r,Y.subtree(),this.#a))}get(e){let r=this.#i(e);return this.#t&&Array.isArray(r)?r[0]:r}#i(e,r=!1){if(this.#t&&!this.#n.has(e))return null;let n=this.constructor.get(this.#r,e,r);return n===void 0?null:Array.isArray(n)?this.#t?n.map(o=>typeof o=="number"?o+"":o):n.map(o=>A(o)?new t(o,{compatMode:this.#t}):o):!this.#t&&A(n)?new t(n,{compatMode:this.#t}):this.#t&&typeof n=="number"?n+"":n}getAll(e){let r=this.#i(e,!0);return r===null?[]:Array.isArray(r)?r:[r]}set(e,r){return this.#t&&this.#n.add(e),this.constructor.set(this.#r,e,r),this}append(e,r){return this.#t&&this.#n.add(e),this.constructor.set(this.#r,e,r,!0),this}has(e){return this.#t&&!this.#n.has(e)?!1:this.constructor.get(this.#r,e)!==void 0}delete(e){if(this.#t&&!this.#n.has(e))return;let r=this.constructor.parsePath(e),n=r.pop(),o=r.length?this.constructor.get(this.#r,r):this.#r;A(o)&&Y.deleteProperty(o,n)}sort(){return this.#s=!0,this}json(){return Y.unproxy(this.#r)}stringify({prettyPrint:e=this.#e}={}){return this.constructor.stringify(this.#r,{only:this.#t&&this.#n,sorted:this.#s,prettyPrint:e})}toString(){return this.stringify()}entries(){let e=[];return this.constructor.reduceValue(this.#r,"",(r,n,o)=>{if(o)return o;if(this.#t&&!this.#n.has(n))if(/\[\d+\]$/.test(n)){if([,n]=/^(.*)\[\d+\]$/.exec(n),!this.#n.has(n)&&!this.#n.has(n=`${n}[]`))return}else return;this.#t&&typeof r=="number"&&(r=r+""),e.push([n,r])}),e[Symbol.iterator]()}keys(){return Array.from(this.entries(),([e])=>e)[Symbol.iterator]()}values(){return Array.from(this.entries(),([,e])=>e)[Symbol.iterator]()}forEach(e,r){for(let[n,o]of this.entries())e.call(r,o,n,this)}[Symbol.iterator](){return this.entries()}get size(){let e=0;return this.forEach(()=>e++),e}static parse(e,r=!1,n="&"){let o={};return(e.startsWith("?")?e.slice(1):e).split(n).filter(Boolean).forEach(s=>{let f=s.indexOf("="),i=f===-1?s:s.slice(0,f),u=f===-1?"":s.slice(f+1);this.set(o,i,u,!0,r)}),o}static fromEntries(e){let r={};for(let[n,o]of e)this.set(r,n,o,!0);return r}static stringify(e,{sorted:r=!1,only:n=null,prettyPrint:o=!1,delim:s="&"}={}){let f=[],i=Object.keys(e);return r&&i.sort(),i.forEach(u=>{this.reduceValue(e[u],u,(a,c,p)=>{if(p)return r?[...p].sort():p;if(n&&!n.has(c))if(/\[\d+\]$/.test(c)){if([,c]=/^(.*)\[\d+\]$/.exec(c),!n.has(c)&&!n.has(c=`${c}[]`))return}else return;o||(c=encodeURIComponent(c)),f.push(c+"="+encodeURIComponent(a))},!!o)}),f.join(s)}static get(e,r,n=!1){return this.reducePath(r,e,(o,s,f)=>f||(o===""?n?s:s?.[0]:s?.[o]))}static set(e,r,n,o=!1,s=!1){this.reducePath(r,e,(f,i,u)=>{let a=u??n;return s&&/^-?\d+(\.\d+)?$/.test(a+"")&&(a=parseFloat(a)),f===""&&Array.isArray(i)?Y.proxy(i).push(a):o&&i?.[f]?Array.isArray(i[f])?Y.proxy(i[f]).push(a):Y.set(i,f,[i[f],a]):Y.set(i,f,a),a})}static reduceValue(e,r,n,o=!1){if(M(e)){let s=Object.keys(e),f=n(e,r,s);if(Array.isArray(f)){f.forEach(i=>{o&&(i=encodeURIComponent(i)),this.reduceValue(e[i],r?`${r}[${i}]`:i,n,o)});return}}n(e,r)}static reducePath(e,r,n){let o=this.parsePath(e),s=r;for(let f=0;f<o.length;f++){let i=o[f];if(Ie(i)&&(i=+i),f===o.length-1)return n(i,s);if(!M(s))return;if(!M(s[i])){let u=o[f+1];s[i]=n(i,s,Ie(u)||u===""?[]:{})}s=s[i]}}static parsePath(e){if(Array.isArray(e))return e;if(!je(e))return[];let r=[];return e.replace(/\[([^\]]*)\]|([^[\]]+)/g,(n,o,s)=>{r.push(o??s)}),r}};var ee=class t extends FormData{static upgradeInPlace(e){return e instanceof t?e:Object.setPrototypeOf(e,t.prototype)}static json(e={},{encodeLiterals:r=!0,meta:n=!1}={}){let o=new t,s=!0;return $e.reduceValue(e,"",(f,i,u=void 0)=>{if(u){let a=Kt(f)==="json";return s=s&&a,a&&u}r&&[!0,!1,null].includes(f)&&(f=new Blob([f+""],{type:"application/json"})),o.append(i,f)}),n?{result:o,isDirectlySerializable:s}:o}async json({decodeLiterals:e=!0,meta:r=!1}={}){let n=!0,o;for(let[s,f]of this.entries()){o||(o=Ye(Nt(s,"["))?[]:{});let i=Kt(f);if(e&&["Blob","File"].includes(i)&&f.type==="application/json"&&[4,5].includes(f.size)){let u=JSON.parse(await f.text());[null,!0,!1].includes(u)&&(f=u,i="json")}n=n&&i==="json",/^[+-]?(?:\d+\.?\d*|\.\d+)(?:[eE][+-]?\d+)?$/.test(f)&&(f=Number(f)),$e.set(o,s,f)}return r?{result:o,isDirectlySerializable:n}:o}};var Le=(t,...e)=>Ae(t,"fetch+",...e),R=(t,...e)=>Ae(t,"fetch+","meta",...e);function Jt(t){return class extends t{static from(e){let r=e.headers instanceof Headers?[...e.headers.entries()].reduce((s,[f,i])=>{let u=f.toLowerCase();return s[u]=s[u]?[].concat(s[u],i):i,s},{}):Object.keys(e.headers||{}).reduce((s,f)=>(s[f.toLowerCase()]=e.headers[f],s),{}),n=e.body,o=Kt(n);if(["Blob","File"].includes(o))r["content-type"]??=n.type,r["content-length"]??=n.size;else if(["Uint8Array","Uint16Array","Uint32Array","ArrayBuffer"].includes(o))r["content-length"]??=n.byteLength;else if(o==="json"&&O(n)){let{result:s,isDirectlySerializable:f}=ee.json(n,{encodeLiterals:!0,meta:!0});f?(n=JSON.stringify(n,(i,u)=>u instanceof Error?{...u,message:u.message}:u),r["content-type"]="application/json",r["content-length"]=new Blob([n]).size):(n=s,o="FormData")}else["text","json"].includes(o)&&!r["content-length"]&&(r["content-length"]=new Blob([n]).size);return!["FormData"].includes(o)&&!["function"].includes(typeof n)&&!r["content-type"]&&(r["content-type"]="application/octet-stream"),{body:n,headers:new Headers(r),$type:o}}async formData(){let e=await super.formData();return ee.upgradeInPlace(e),e}async any({to:e=null,memo:r=!1}={}){if(e&&!["blob","text","json","arrayBuffer","bytes","formData"].includes(e))throw new Error(`Invalid target type specified: ${e}`);let n=R(this,"cache"),o=async i=>{if(!r)return await this[i||"bytes"]();let u=c=>{if(c instanceof FormData){let p=new ee;for(let[h,d]of c.entries())p.append(h,d);return p}return(!i||i==="json")&&(lr(c)||cr(c))?structuredClone(c):c};if(!i&&n.has("original"))return u(n.has("original"));if(i??="bytes",n.has(i))return u(n.get(i));let a;return n.has("memo")?a=n.get("memo").clone()[i]():(n.set("memo",this.clone()),a=await this[i]()),n.set(i,a),u(a)},s=(this.headers.get("Content-Type")||"").split(";")[0].trim(),f;if((!e||["formData","json"].includes(e))&&["multipart/form-data","application/x-www-form-urlencoded"].includes(s)){let i=await o("formData");ee.upgradeInPlace(i),e==="json"&&(i=await i.json({decodeLiterals:!0})),f=i}else if((!e||["formData","json"].includes(e))&&s==="application/json"){let i=await o("json");e==="formData"&&(i=ee.json(i,{encodeLiterals:!0})),f=i}else if(!e&&(s.startsWith("image/")||s.startsWith("video/")||s.startsWith("audio/")||s.startsWith("application/")&&!["xml","json","javascript","x-www-form-urlencoded"].some(i=>s.includes(i))))f=await o("blob");else if(!e&&(s.startsWith("text/")||s.startsWith("application/")&&["xml","javascript"].some(i=>s.includes(i))))f=await o("text");else{if(["json","formData"].includes(e))throw new Error(`Cannot convert body of type ${s} to ${e}`);f=await o(e)}return f}forget(){R(this,"cache").clear()}}}function Kt(t){if(t instanceof FormData)return"FormData";if(t===null||Ze(t)||qt(t))return"json";if(et(t))return"text";if(O(t)){let e=t[Symbol.toStringTag],r=["Uint8Array","Uint16Array","Uint32Array","ArrayBuffer","Blob","File","FormData","Stream","ReadableStream"].reduce((n,o)=>n||(e===o?o:null),null);if(r)return r;if(E(t)||Array.isArray(t))return"json";if("toString"in t)return"text"}return null}function Ps(t){return t!==null&&typeof t=="object"&&typeof t.read=="function"&&typeof t.pipe=="function"&&typeof t.on=="function"}function Hr(t){return t instanceof ReadableStream||Ps(t)}function te(t,e=!0){return z(t)?t:!e&&E(t)?[t]:t!==!1&&t!==0&&ur(t)?[]:pr(t)?Array.prototype.slice.call(t):E(t)?Object.values(t):[t]}var re=class t extends Headers{static upgradeInPlace(e){return e instanceof t?e:Object.setPrototypeOf(e,t.prototype)}set(e,r){if(/^Set-Cookie$/i.test(e)){if(Array.isArray(r)){this.delete(e);for(let n of r)this.append(e,n);return}E(r)&&(r=Kr(r))}return/Cookie/i.test(e)&&(r=go(r)),/^Content-Range$/i.test(e)&&(r=xo(r)),/^Range$/i.test(e)&&(r=yo(r)),/^Accept$/i.test(e)&&(r=bo(r)),super.set(e,r)}append(e,r){if(/^Set-Cookie$/i.test(e)){if(Array.isArray(r)){for(let n of r)this.append(e,n);return}E(r)&&(r=Kr(r))}return/Cookie/i.test(e)&&(r=go(r)),/^Content-Range$/i.test(e)&&(r=xo(r)),/^Range$/i.test(e)&&(r=yo(r)),/^Accept$/i.test(e)&&(r=bo(r)),super.append(e,r)}get(e,r=!1){let n=super.get(e);if(/^Set-Cookie$/i.test(e)&&r&&(n=this.getSetCookie().map(o=>{let[s,...f]=o.split(";"),[i,u]=s.split("=").map(c=>c.trim()),a={name:i,value:u};return f.map(c=>c.trim().split("=")).forEach(c=>{a[c[0][0].toLowerCase()+c[0].substring(1).replace("-","")]=c.length===1?!0:c[1]}),a})),/^Cookie$/i.test(e)&&r&&(n=n?.split(";").map(o=>{let[s,f]=o.split("=").map(i=>i.trim());return{name:s,value:f}})||[]),/^Content-Range$/i.test(e)&&n&&r&&(n=tt(n,"bytes ").split("/")),/^Range$/i.test(e)&&r&&(n=n?tt(n,"bytes=").split(",").map(o=>{let s=o.trim().split("-").map(f=>f?parseInt(f,10):null);return s.resolveAgainst=f=>{let i=[...s];return i[1]===null?i[1]=f-1:i[1]=Math.min(i[1],f)-1,i[0]===null&&(i[0]=i[1]?f-i[1]-1:0),i},s.canResolveAgainst=(f,i)=>{let u=[typeof s[0]=="number"?s[0]:f,typeof s[1]=="number"?s[1]:i-1];return!(u[0]>u[1]||u[0]<f||u[1]>=i)},s.toString=()=>o,s}):[]),/^Accept$/i.test(e)&&n&&r){let o=f=>{let[i,u]=f.trim().split(";").map(a=>a.trim());return[i,parseFloat((u||"q=1").replace("q=",""))]},s=n;n=n.split(",").map(f=>o(f)).sort((f,i)=>f[1]>i[1]?-1:1)||[],n.match=f=>{if(!f)return 0;let i=a=>a.split("/").map(c=>c.trim()),u=i(f+"");return n.reduce((a,[c,p])=>{if(a)return a;let h=i(c);return[0,1].every(d=>u[d]===h[d]||u[d]==="*"||h[d]==="*")?p:0},0)},n.toString=()=>s}return n}};function Kr(t){let e=[`${t.name}=${t.value}`];for(let r in t){if(["name","value"].includes(r))continue;let n=r[0].toUpperCase()+r.substring(1);n==="MaxAge"&&(n="Max-Age"),e.push(t[r]===!0?n:`${n}=${t[r]}`)}return e.join("; ")}function go(t){return O(t)&&(t=[].concat(t).map(Kr).join("; ")),t}function yo(t){let e=[];return te(t).forEach((r,n)=>{let o=Array.isArray(r)?r.map(s=>[null,void 0].includes(s)?"":s).join("-"):r+"";n===0&&!o.includes("bytes=")&&(o=`bytes=${o}`),e.push(o)}),e.join(", ")}function xo(t){if(Array.isArray(t)){if(t.length<2||!t[0].includes("-"))throw new Error("A Content-Range array must be in the format: [ 'start-end', 'total' ]");t=`bytes ${t.join("/")}`}return t}function bo(t){return Array.isArray(t)&&(t=t.map(e=>Array.isArray(e)?e.map((r,n)=>n===1&&(r=parseFloat(r),!0)?r===1?"":`;q=${r}`:r.trim()).join(""):e.trim()).join(",")),t}var ne=class t extends Jt(Response){constructor(e,r={}){super(e,r),re.upgradeInPlace(this.headers)}static upgradeInPlace(e){return e instanceof t||(Object.setPrototypeOf(e,t.prototype),re.upgradeInPlace(e.headers)),e}static from(e,{memoize:r=!1,...n}={}){if(e instanceof Response)return e;let o;if(typeof e<"u"){let f;({body:e,headers:f,$type:o}=super.from({body:e,headers:n.headers})),n={...n,headers:f}}let s=new this(e,n);if(r){let f=R(s,"cache"),i={json:"json",FormData:"formData",text:"text",ArrayBuffer:"arrayBuffer",Blob:"blob",Bytes:"bytes"};f.set(i[o]||"original",e)}return s}get status(){return R(this).get("status")??super.status}clone(){let e=super.clone();t.upgradeInPlace(e);let r=R(this);return Le(e).set("meta",new Map(r)),R(e).has("cache")&&R(e).set("cache",new Map(r.get("cache"))),e}};async function _o(t,e={}){let r=await fetch(t,e);return ne.upgradeInPlace(r),r}var Xt=class t extends Jt(Request){constructor(e,r={}){super(e,r),re.upgradeInPlace(this.headers)}static upgradeInPlace(e){return e instanceof t||(Object.setPrototypeOf(e,t.prototype),re.upgradeInPlace(e.headers)),e}static from(e,{memoize:r=!1,...n}={}){if(e instanceof Request)return e;let o,s=n.body;if("body"in n){let{body:i,headers:u,$type:a}=super.from(n);n={...n,body:i,headers:u},o=a}let f=new this(e,n);if(r){let i=R(f,"cache"),u={json:"json",FormData:"formData",text:"text",ArrayBuffer:"arrayBuffer",Blob:"blob",Bytes:"bytes"};i.set(u[o]||"original",s)}return f}static async copy(e,r={}){let o=["method","headers","mode","credentials","cache","redirect","referrer","integrity"].reduce((s,f)=>({...s,[f]:f in r?r[f]:f==="headers"?new Headers(e[f]):e[f]}),{});return["GET","HEAD"].includes(o.method.toUpperCase())?o.body=null:"body"in r?(o.body=r.body,"headers"in r||(o.headers.delete("Content-Type"),o.headers.delete("Content-Length"))):o.body=await e.clone().arrayBuffer(),o.mode==="navigate"&&(o.mode="cors"),{url:r.url||e.url,...o}}clone(){let e=super.clone();t.upgradeInPlace(e);let r=R(this);return Le(e).set("meta",new Map(r)),R(e).has("cache")&&R(e).set("cache",new Map(r.get("cache"))),e}};var un={};be(un,{any:()=>qs,apply:()=>rn,batch:()=>fn,construct:()=>tn,defineProperties:()=>Us,defineProperty:()=>Ot,deleteProperties:()=>zs,deleteProperty:()=>Et,get:()=>pe,getOwnPropertyDescriptor:()=>Zt,getOwnPropertyDescriptors:()=>Ns,getPrototypeOf:()=>Zr,has:()=>Yt,intercept:()=>ks,isExtensible:()=>Yr,map:()=>Fs,observe:()=>an,ownKeys:()=>en,path:()=>$s,preventExtensions:()=>on,reduce:()=>sn,set:()=>Ne,setPrototypeOf:()=>nn,subtree:()=>Ls});var T=(t,...e)=>Ae(t,"observerAPI",...e),ft=(t,e)=>t instanceof Promise?t.then(e):e(t),Qt={};var qe=class{constructor(e,r){this.registry=e,Object.assign(this,{...r,target:e.target}),this.params.signal&&this.params.signal.addEventListener("abort",()=>this.remove())}remove(){return this.removed=!0,this.registry.removeRegistration(this)}};var wt=class extends qe{constructor(){super(...arguments),this.emit.currentRegistration=this,Object.defineProperty(this,"abortController",{value:new AbortController}),Object.defineProperty(this,"signal",{value:this.abortController.signal}),Qt.setMaxListeners?.(0,this.signal)}remove(){this.abortController.abort(),super.remove()}fire(e){if(this.emit.recursionTarget&&!["inject","force-async","force-sync"].includes(this.params.recursions))return;let r=e,n=this.filter;if(n!==1/0&&(n=te(n,!1))&&(r=e.filter(s=>n.includes(s.key))),this.params.diff&&(r=r.filter(s=>s.type!=="set"||s.value!==s.oldValue)),!r.length)return;if(["inject","defer"].includes(this.params.recursions)){if(this.emit.recursionTarget){this.emit.recursionTarget.push(...r);return}this.emit.recursionTarget=this.params.recursions==="inject"?r:[]}let o=this.filter===1/0||Array.isArray(this.filter)?this.emit(r,this):this.emit(r[0],this);return ft(o,s=>{let f=this.emit.recursionTarget;return delete this.emit.recursionTarget,this.params.recursions==="defer"&&f?.length?this.emit.currentRegistration.fire(f):s})}};var ke=class{constructor(e){this.target=e,this.entries=[]}addRegistration(e){return this.entries.push(e),e}removeRegistration(e){this.entries=this.entries.filter(r=>r!==e)}static _getInstance(e,r,n=!0,o=this.__namespace){if(!O(r))throw new Error(`Subject must be of type object; "${Xe(r)}" given!`);let s=this;return o&&T(globalThis,"observerAPI","namespaces").has(e+"-"+o)&&(s=T(globalThis,"observerAPI","namespaces").get(e+"-"+o),e+="-"+o),!T(r,"registry").has(e)&&n&&T(r,"registry").set(e,new s(r)),T(r,"registry").get(e)}static _namespace(e,r,n=null){if(e+="-"+r,arguments.length===2)return T(globalThis,"observerAPI","namespaces").get(e);if(!(n.prototype instanceof this))throw new Error(`The implementation of the namespace ${this.name}.${r} must be a subclass of ${this.name}.`);T(globalThis,"observerAPI","namespaces").set(e,n),n.__namespace=r}};var C=class{constructor(e,r){if(this.target=e,!r.operation)throw new Error("Descriptor operation must be given in definition!");Object.assign(this,r)}get[Symbol.toStringTag](){return"Descriptor"}static[Symbol.hasInstance](e){return e?.[Symbol.toStringTag]==="Descriptor"&&e.operation}};var B=class extends ke{static getInstance(e,r=!0,n=null){return super._getInstance("listeners",...arguments)}static namespace(e,r=null){return super._namespace("listeners",...arguments)}constructor(e){super(e),this.batches=[]}addRegistration(e,r,n){return super.addRegistration(new wt(this,{filter:e,emit:r,params:n}))}emit(e,{eventsArePropertyDescriptors:r=!1,eventIsArrayMethodDescriptor:n=!1}={}){if(this.batches.length){let o=this.batches[0].params.arrayMethodName;this.batches[0].snapshots.push({events:[...e],arrayMethodName:o,eventsArePropertyDescriptors:r,eventIsArrayMethodDescriptor:n});return}this.$emit(this.entries,[{events:e,eventsArePropertyDescriptors:r,eventIsArrayMethodDescriptor:n}])}$emit(e,r){let n=0,o=0,s=0;for(let c of e)n+=1,c.params.withPropertyDescriptors&&(o+=1),c.params.withArrayMethodDescriptors&&(s+=1);let f=[],i=[],u=[],a=[];for(let c of r){let p=c.arrayMethodName,h=c.eventsArePropertyDescriptors,d=c.eventIsArrayMethodDescriptor;for(let l of c.events)if(p&&(l.operation=p),o&&(s&&f.push(l),d||s!==n&&i.push(l)),o!==n){let x=l;if(h){let{target:b,type:y,...g}=l;x=new C(b,{type:"set",...g}),Object.defineProperty(x,"value","get"in g.value?{get:()=>g.value.get()}:{value:g.value.value}),g.oldValue&&Object.defineProperty(x,"oldValue","get"in g.oldValue?{get:()=>g.oldValue.get()}:{value:g.oldValue.value})}s&&u.push(x),d||s!==n&&a.push(x)}}for(let c of e)c.params.withPropertyDescriptors?c.params.withArrayMethodDescriptors?f.length&&c.fire(f):i.length&&c.fire(i):c.params.withArrayMethodDescriptors?u.length&&c.fire(u):a.length&&c.fire(a)}batch(e,r={}){this.batches.unshift({entries:[...this.entries],snapshots:[],params:r});let n=e();return ft(n,o=>{let s=this.batches.shift();return s.snapshots.length&&this.$emit(s.entries,s.snapshots),o})}};var vt=class extends qe{exec(e,r,n){return this.running||!this.traps[e.operation]?r(...Array.prototype.slice.call(arguments,2)):(this.running=!0,this.traps[e.operation](e,n,(...o)=>(this.running=!1,r(...o))))}};var le=class extends ke{static getInstance(e,r=!0,n=null){return super._getInstance("traps",...arguments)}static namespace(e,r=null){return super._namespace("traps",...arguments)}addRegistration(e){return super.addRegistration(new vt(this,e))}emit(e,r=null){let n=this;return function o(s,...f){let i=n.entries[s];return i?i.exec(e,(...u)=>o(s+1,...u),...f):r?r(e,...f):f[0]}(0)}};var Qr={};be(Qr,{accessorize:()=>Rs,proxy:()=>Jr,unaccessorize:()=>Ds,unproxy:()=>Pt});var wo=Symbol("wqOriginal");function Rs(t,e,r={}){t=Xr(t);let n=T(t,"accessorizedProps");function o(u){let a,c=t;do a=Object.getOwnPropertyDescriptor(c,u);while(!a&&(c=Object.getPrototypeOf(c)));return a?{proto:c,descriptor:a}:{descriptor:{value:void 0,configurable:!0,enumerable:!0,writable:!0}}}function s(u){if(n.has(u+""))return!0;let a=o(u);a.getValue=function(h=!1){return h?this.descriptor:this.descriptor.get?this.descriptor.get():this.descriptor.value},a.setValue=function(h,d=!1){if(this.dirty=!0,d){this.descriptor=h;return}return this.descriptor.set?this.descriptor.set(h)!==!1:(this.descriptor.value=h,!0)},a.intact=function(){let h=Object.getOwnPropertyDescriptor(t,u);return h?.get===p.get&&h?.set===p.set&&n.get(u+"")===this},a.restore=function(){return this.intact()?(this.proto&&this.proto!==t||!this.proto&&!this.dirty?delete t[u]:Object.defineProperty(t,u,this.descriptor),n.delete(u+""),!0):!1},n.set(isNaN(u)?u:parseInt(u),a);let{enumerable:c=!0}=a.descriptor,p={enumerable:c,configurable:!0};("value"in a.descriptor||a.descriptor.set)&&(p.set=function(h){return Ne(this,u,h,r)}),("value"in a.descriptor||a.descriptor.get)&&(p.get=function(){return pe(this,u,r)});try{return Object.defineProperty(t,u,p),!0}catch{return n.delete(u+""),!1}}let i=(Array.isArray(e)?e:e===void 0?Object.keys(t):[e]).map(s);return e===void 0||Array.isArray(e)?i:i[0]}function Ds(t,e,r={}){t=Xr(t);let n=T(t,"accessorizedProps");function o(i){return n.has(i+"")?n.get(i+"").restore():!0}let f=(Array.isArray(e)?e:e===void 0?Object.keys(t):[e]).map(o);return e===void 0||Array.isArray(e)?f:f[0]}function Jr(t,e={},r=void 0){let n=Xr(t);if(typeof e.membrane=="boolean")throw new Error("The params.membrane parameter cannot be of type boolean.");if(e.membrane&&T(n,"membraneRef").has(e.membrane))return T(n,"membraneRef").get(e.membrane);let o={apply:(i,u,a)=>rn(i,u,a,void 0,e),construct:(i,u,a=null)=>tn(i,u,a,e),defineProperty:(i,u,a)=>Ot(i,u,a,e),deleteProperty:(i,u)=>Et(i,u,e),get:(i,u,a=null)=>{if(u===wo)return n;let c={...e,receiver:a},p=pe(i,u,c);return Array.isArray(i)&&typeof p=="function"&&!/^class\s?/.test(Function.prototype.toString.call(p))?Jr(p,{...e,arrayMethodName:u,membrane:a},r):e.chainable&&O(p)&&u!=="prototype"&&!(typeof p=="function"&&/^class\s?|\{\s\[native\scode\]\s\}$/.test(Function.prototype.toString.call(p)))?Jr(p,e,r):p},getOwnPropertyDescriptor:(i,u)=>Zt(i,u,e),getPrototypeOf:i=>Zr(i,e),has:(i,u)=>Yt(i,u,e),isExtensible:i=>Yr(i,e),ownKeys:i=>en(i,e),preventExtensions:i=>on(i,e),set:(i,u,a,c=null)=>Ne(i,u,a,{...e,receiver:c}),setPrototypeOf:(i,u)=>nn(i,u,e)},s=r?.(o)||o,f=new Proxy(n,s);return e.membrane&&T(n,"membraneRef").set(e.membrane,f),f}function Pt(t){return t&&t[wo]||t}function Xr(t){if(!t||!O(t))throw new Error("Target must be of type object!");return Pt(t)}var At=class extends Array{get[Symbol.toStringTag](){return"Path"}static[Symbol.hasInstance](e){return Array.isArray(e)&&e[Symbol.toStringTag]==="Path"}};function $s(...t){return new At(...t)}var Fe=class extends Array{get[Symbol.toStringTag](){return"Subtree"}static[Symbol.hasInstance](e){return Array.isArray(e)&&e[Symbol.toStringTag]==="Subtree"}};function Ls(){return new Fe}function qs(){return 1/0}function sn(t,e,r,n=s=>s,o={}){let s=e instanceof Fe;if(!(!s&&!e?.length))return function f(i,u,a,c){let p=c||u[a.level]instanceof Fe,h=p?1/0:u[a.level],d=p?!1:a.level===u.length-1;return i instanceof C&&i.operation!=="get"?a={...a,probe:"always"}:a.probe!=="always"&&(a={...a,probe:!d}),r(i,h,(l,...x)=>{let b=m=>{m instanceof C&&(m.path="key"in m?[m.key]:[],i instanceof C&&(m.path="key"in m?i.path.concat(m.key):i.path.slice(0),Object.defineProperty(m,"context",{get:()=>i,configurable:!0})))},y=x[0]||{},g=m=>{if(m instanceof C&&"argumentsList"in m)return;let w=oe(m,!1);return ft(w,_=>(m instanceof C?m.value=_:m=_,f(m,u,{...a,...y,keyInParent:m.key,level:a.level+1},p)))};if(St(h)&&Array.isArray(l)){if(l.forEach(b),d)return n(l,...x);p&&l[0]instanceof C&&(l[0].operation!=="get"||o.asGet)&&n(l,...x);for(let m of l)g(m);return}return b(l),d?n(l,...x):g(l)},a)}(t,e.slice(0),{...o,level:0},s)}function an(t,e,r,n={}){let o=oe(t,!n.level);if(ie(arguments[1])&&([,r,n={}]=arguments,e=1/0),!ie(r))throw new Error(`Handler must be a function; "${Xe(r)}" given!`);if(e instanceof At||e instanceof Fe)return sn(o,e,an,r,n);if(n={...n,descripted:!0},delete n.live,!O(o))return n.probe&&pe(o,e,r,n)||void 0;let s=vo(o,e,r,n);return n.probe?pe(o,e,s,n):s()}function ks(t,e,r={}){let n=oe(t);return E(e)||([,,,r={}]=arguments,e={[arguments[1]]:arguments[2]}),le.getInstance(n,!0,r.namespace).addRegistration({traps:e,params:r})}function Zt(t,e,r=o=>o,n={}){return H(t,"getOwnPropertyDescriptor",{key:e},r,n)}function Ns(t,e,r=o=>o,n={}){return H(t,"getOwnPropertyDescriptors",{key:e},r,n)}function Zr(t,e=n=>n,r={}){return H(t,"getPrototypeOf",{},e,r)}function Yr(t,e=n=>n,r={}){return H(t,"isExtensible",{},e,r)}function en(t,e=n=>n,r={}){return H(t,"ownKeys",{},e,r)}function Yt(t,e,r=o=>o,n={}){return H(t,"has",{key:e},r,n)}function pe(t,e,r=o=>o,n={}){let o,s=oe(t,!n.level);return E(r)?[n,r]=[r,f=>f]:n.live&&(o=!0),e instanceof At||e instanceof Fe?sn(s,e,pe,r,{...n,asGet:!0}):Bs(s,e,f=>{let i=[...f];return function u(a,c,p){if(!c.length)return p(a);let h=c.shift();if(!["string","number","symbol"].includes(typeof h))throw new Error(`Property name/key ${h} invalid.`);function d(b,y=void 0){let g=_=>(b.value=_,u([...a,n.live||n.descripted?b:_],c,p));if(arguments.length>1)return g(y);if(!O(s))return g(s?.[b.key]);let m=T(s,"accessorizedProps",!1),w=m&&m.get(b.key);if(w&&w.intact())return g(w.getValue(n.withPropertyDescriptors));if(n.withPropertyDescriptors){let _=Object.getOwnPropertyDescriptor(s,b.key);return g(_)}return g(Reflect.get(s,b.key))}let l=new C(s,{type:"get",key:h,value:void 0,operation:"get",related:i});if(!O(s))return d(l);let x=le.getInstance(s,!1,n.namespace);return x?x.emit(l,d):d(l)}([],f.slice(0),u=>{let a=St(e)?u:u[0];return o&&O(s)?vo(s,e,r,n,t.key)(a):r(a)})},n)}function fn(t,e,r={}){let n=oe(t);return B.getInstance(n,!0,r.namespace).batch(e,r)}function Fs(t,e,r={}){e=oe(e),t=oe(t);let n=(r.only||[]).slice(0),o=(r.except||[]).slice(0),s=Object.keys(r.spread?[...t]:t).map(a=>isNaN(a)?a:parseInt(a)),f=n.length?n.filter(a=>s.includes(a)):s.filter(a=>!o.includes(a)),i=a=>!Array.isArray(e)||isNaN(a)?a:a-o.filter(c=>c<a).length,u=a=>{let c=Zt(t,a,r);"value"in c&&c.writable&&c.enumerable&&c.configurable?Ne(e,i(a),c.value,r):(c.enumerable||r.onlyEnumerable===!1)&&Ot(e,a,{...c,configurable:!0},r)};return fn(e,()=>{f.forEach(u)}),an(t,a=>{a.filter(c=>n.length?n.includes(c.key):!o.includes(c.key)).forEach(c=>{if(c.type==="delete")return Et(e,i(c.key),r);if(c.type==="def"){(c.value.enumerable||r.onlyEnumerable===!1)&&Ot(e,i(c.key),{...c.value,configurable:!0},r);return}u(c.key)})},{...r,withPropertyDescriptors:!0})}function Ne(t,e,r,n=f=>f,o={},s=!1){let f=oe(t),i=[[e,r]];E(e)&&([,,n=a=>a,o={},s=!1]=arguments,i=Object.entries(e)),E(n)&&([s,o,n]=[typeof o=="boolean"?o:s,n,a=>a]);let u=i.map(([a])=>a);return function a(c,p,h){if(!p.length)return h(c);let[d,l]=p.shift();function x(y,g=void 0){let m=k=>(y.status=k,a(c.concat(y),p,h));if(arguments.length>1)return m(y,g);let w=T(f,"accessorizedProps",!1),_=w&&w.get(y.key);return y.type==="def"?(_&&!_.restore()&&m(!1),Object.defineProperty(f,y.key,y.value),m(!0)):_&&_.intact()?m(_.setValue(y.value)):m(Reflect.set(f,y.key,y.value))}function b(y,g){if(o.diff&&l===g)return a(c,p,h);let m=new C(f,{type:s?"def":"set",key:d,value:l,isUpdate:y,oldValue:g,related:[...u],operation:s?"defineProperty":"set",detail:o.detail}),w=le.getInstance(f,!1,o.namespace);return w?w.emit(m,x):x(m)}return Yt(f,d,y=>{if(!y)return b(y);if(d==="length"&&Array.isArray(f)&&T(f).has("$length"))return b(!0,T(f).get("$length"));let g={...o,withPropertyDescriptors:s};return pe(f,d,m=>b(y,m),g)},o)}([],i.slice(0),a=>{let c=B.getInstance(f,!1,o.namespace);return c&&c.emit(a,{eventsArePropertyDescriptors:!!s}),n(St(e)?a.map(p=>p.status):a[0]?.status)})}function Ot(t,e,r,n=s=>s,o={}){return Ne(t,e,r,n,o,!0)}function Us(t,e,r=o=>o,n={}){return Ne(t,e,r,n,!0)}function Et(t,e,r=o=>o,n={}){let o=oe(t);E(r)&&([n,r]=[r,i=>i]);let s=te(e,!1),f=[...s];return function i(u,a,c){if(!a.length)return c(u);let p=a.shift();function h(l,x=void 0){let b=m=>(l.status=m,i(u.concat(l),a,c));if(arguments.length>1)return b(l,x);let y=T(o,"accessorizedProps",!1),g=y&&y.get(l.key);return g&&!g.restore()&&b(!1),b(Reflect.deleteProperty(o,l.key))}function d(l){let x=new C(o,{type:"delete",key:p,oldValue:l,related:[...f],operation:"deleteProperty",detail:n.detail}),b=le.getInstance(o,!1,n.namespace);return b?b.emit(x,h):h(x)}return pe(o,p,d,n)}([],s.slice(0),i=>{let u=B.getInstance(o,!1,n.namespace);return u&&u.emit(i),r(St(e)?i.map(a=>a.status):i[0].status)})}function zs(t,e,r=o=>o,n={}){return Et(...arguments)}function tn(t,e,r=null,n=s=>s,o={}){return H(t,"construct",arguments.length>2?{argumentsList:e,newTarget:r}:{argumentsList:e},n,o)}function rn(t,e,r,n=s=>s,o={}){let s=Pt(e),f;if(Array.isArray(e)){if(o.arrayMethodName){let i=new C(s,{operation:o.arrayMethodName,argumentsList:r});B.getInstance(s,!1,o.namespace)?.emit([i],{eventIsArrayMethodDescriptor:!0})}T(s).set("$length",s.length),f=fn(s,()=>H(t,"apply",{thisArgument:e,argumentsList:r},n,o),o),T(s).delete("$length")}else f=H(t,"apply",{thisArgument:s,argumentsList:r},n,o);return f}function nn(t,e,r=o=>o,n={}){return H(t,"setPrototypeOf",{proto:e},r,n)}function on(t,e=n=>n,r={}){return H(t,"preventExtensions",{},e,r)}function vo(t,e,r,n={}){let o=new AbortController;Qt.setMaxListeners?.(0,o.signal),n.signal&&n.signal.addEventListener("abort",()=>o.abort());let s={...n,signal:o.signal},f=B.getInstance(t,!0,s.namespace),i=new Map;return function u(a=[],c=null){let p,h,d;if(St(e)){if(c){d=!0,h=c;for(let l of a)i.get(l.key)?.remove(),i.delete(l.key)}else h=f.addRegistration(e,u,s);p={signal:h.signal,childRegistrations:i}}else c?.remove(),h=f.addRegistration(e,u,s),p={signal:h.signal};if(s.childRegistrations&&s.keyInParent&&s.childRegistrations.set(s.keyInParent,h),arguments.length){let l=r(a,p);if(arguments.length>1)return l}return o}}function H(t,e,r={},n=s=>s,o={}){t=oe(t),E(n)&&([o,n]=[n,u=>u]);function s(u,a){return arguments.length>1?n(a):n((Reflect[e]||Object[e])(t,...Object.values(r)))}let f=new C(t,{operation:e,...r}),i=le.getInstance(t,!1,o.namespace);return i?i.emit(f,s):s(f)}function St(t){return t===1/0||Array.isArray(t)}function oe(t,e=!0,r=!0){if((!t||!O(t))&&e)throw new Error(`Object must be of type object or array! "${Xe(t)}" given.`);return t instanceof C&&(t.type==="def"&&r?t=typeof t.value.get=="function"?t.value.get():t.value.value:t=t.value),t&&Pt(t)}function Bs(t,e,r,n={}){return e===1/0?n.level&&!O(t)?r([]):r(Object.entries(Object.getOwnPropertyDescriptors(t)).filter(([,o])=>o.writable!==!1&&!o.get&&!o.set).map(([o])=>o)):r(te(e,!1))}var Tt={...un,...Qr},Po=Tt;function I(t){return!Array.isArray(t)&&typeof t=="object"&&t}function ut(t){return typeof t}function G(t){return Array.isArray(t)}function ct(t){return typeof t=="function"}function cn(t){return t===null||t===""}function Ue(t){return arguments.length&&(t===void 0||typeof t>"u")}function P(t){return Array.isArray(t)||typeof t=="object"&&t||ct(t)}function ln(t){return cn(t)||Ue(t)||t===!1||t===0||P(t)&&!Object.keys(t).length}function he(t){return ct(t)||t&&{}.toString.call(t)==="[object function]"}function er(t){return t instanceof String||typeof t=="string"&&t!==null}function pn(t){return!er(t)&&!Ue(t.length)}function Pe(t,...e){if(!t||!["object","function"].includes(typeof t))throw new Error("Argument #1 must be of type object");let r=t[Symbol.for("wq")];if(r||(r=new tr,Object.defineProperty(t,Symbol.for("wq"),{value:r,enumerable:!1,configurable:!1,writable:!1})),!e.length)return r;let n,o;for(;n=e.shift();)(o=r)&&!(r=r.get(n))&&(r=new tr,o.set(n,r));return r}var tr=class extends Map{};var me=class extends MessageEvent{#r;get originalTarget(){return this.#r}#t;get eventID(){return this.#t}#n;get data(){return this.#n}#e;get live(){return this.#e}#s;get bubbles(){return this.#s}#a;get forwarded(){return this.#a}#i;get honourDoneMutationFlags(){return this.#i}#f=[];get ports(){return this.#f}constructor(e,{originalTarget:r=null,type:n="message",eventID:o,live:s=!1,honourDoneMutationFlags:f=!1,bubbles:i=!1,forwarded:u=!1,ports:a=[]}={}){if(n&&typeof n!="string")throw new TypeError("Where specified, wqEventOptions.type must be a string");if(super(n),this.#n=e,this.#r=r,this.#t=o,this.#e=s,this.#s=i,this.#a=u,this.#i=f,this.#f=a,this.#f.forEach(c=>L.upgradeInPlace(c)),P(this.#n)&&this.#e){if(typeof o!="string")throw new TypeError("eventID must be a non-empty string");mn.call(r,this.#n,this.#t,{honourDoneMutationFlags:this.#i})}}#h=!1;get immediatePropagationStopped(){return this.#h}stopImmediatePropagation(){this.#h=!0,this.#l=!0,super.stopImmediatePropagation()}#l=!1;get propagationStopped(){return this.#l}stopPropagation(){this.#l=!0,super.stopPropagation()}#o=!1;get defaultPrevented(){return this.#o}preventDefault(){this.#o=!0,super.preventDefault()}respondWith(e,r=[]){for(let n of this.#f)n.postMessage(e,r);return!!this.#f.length}};var In={};be(In,{any:()=>ui,apply:()=>Pn,batch:()=>Tn,construct:()=>vn,defineProperties:()=>hi,defineProperty:()=>Ct,deleteProperties:()=>mi,deleteProperty:()=>Rt,get:()=>ye,getOwnPropertyDescriptor:()=>nr,getOwnPropertyDescriptors:()=>li,getPrototypeOf:()=>bn,has:()=>or,intercept:()=>ci,isExtensible:()=>_n,map:()=>pi,observe:()=>Sn,ownKeys:()=>wn,path:()=>ai,preventExtensions:()=>En,reduce:()=>An,set:()=>Ve,setPrototypeOf:()=>On,subtree:()=>fi});function Oe(t,e=!0){return G(t)?t:!e&&I(t)?[t]:t!==!1&&t!==0&&ln(t)?[]:pn(t)?Array.prototype.slice.call(t):I(t)?Object.values(t):[t]}var j=(t,...e)=>Pe(t,"observerAPI",...e),lt=(t,e)=>t instanceof Promise?t.then(e):e(t),rr={};var ze=class{constructor(e,r){this.registry=e,Object.assign(this,{...r,target:e.target}),this.params.signal&&this.params.signal.addEventListener("abort",()=>this.remove())}remove(){return this.removed=!0,this.registry.removeRegistration(this)}};var It=class extends ze{constructor(){super(...arguments),this.emit.currentRegistration=this,Object.defineProperty(this,"abortController",{value:new AbortController}),Object.defineProperty(this,"signal",{value:this.abortController.signal}),rr.setMaxListeners?.(0,this.signal)}remove(){this.abortController.abort(),super.remove()}fire(e){if(this.emit.recursionTarget&&!["inject","force-async","force-sync"].includes(this.params.recursions))return;let r=e,n=this.filter;if(n!==1/0&&(n=Oe(n,!1))&&(r=e.filter(s=>n.includes(s.key))),this.params.diff&&(r=r.filter(s=>s.type!=="set"||s.value!==s.oldValue)),!r.length)return;if(["inject","defer"].includes(this.params.recursions)){if(this.emit.recursionTarget){this.emit.recursionTarget.push(...r);return}this.emit.recursionTarget=this.params.recursions==="inject"?r:[]}let o=this.filter===1/0||Array.isArray(this.filter)?this.emit(r,this):this.emit(r[0],this);return lt(o,s=>{let f=this.emit.recursionTarget;return delete this.emit.recursionTarget,this.params.recursions==="defer"&&f?.length?this.emit.currentRegistration.fire(f):s})}};var Be=class{constructor(e){this.target=e,this.entries=[]}addRegistration(e){return this.entries.push(e),e}removeRegistration(e){this.entries=this.entries.filter(r=>r!==e)}static _getInstance(e,r,n=!0,o=this.__namespace){if(!P(r))throw new Error(`Subject must be of type object; "${ut(r)}" given!`);let s=this;return o&&j(globalThis,"observerAPI","namespaces").has(e+"-"+o)&&(s=j(globalThis,"observerAPI","namespaces").get(e+"-"+o),e+="-"+o),!j(r,"registry").has(e)&&n&&j(r,"registry").set(e,new s(r)),j(r,"registry").get(e)}static _namespace(e,r,n=null){if(e+="-"+r,arguments.length===2)return j(globalThis,"observerAPI","namespaces").get(e);if(!(n.prototype instanceof this))throw new Error(`The implementation of the namespace ${this.name}.${r} must be a subclass of ${this.name}.`);j(globalThis,"observerAPI","namespaces").set(e,n),n.__namespace=r}};var $=class{constructor(e,r){if(this.target=e,!r.operation)throw new Error("Descriptor operation must be given in definition!");Object.assign(this,r)}get[Symbol.toStringTag](){return"Descriptor"}static[Symbol.hasInstance](e){return e?.[Symbol.toStringTag]==="Descriptor"&&e.operation}};var de=class extends Be{static getInstance(e,r=!0,n=null){return super._getInstance("listeners",...arguments)}static namespace(e,r=null){return super._namespace("listeners",...arguments)}constructor(e){super(e),this.batches=[]}addRegistration(e,r,n){return super.addRegistration(new It(this,{filter:e,emit:r,params:n}))}emit(e,{eventsArePropertyDescriptors:r=!1,eventIsArrayMethodDescriptor:n=!1}={}){if(this.batches.length){let o=this.batches[0].params.arrayMethodName;this.batches[0].snapshots.push({events:[...e],arrayMethodName:o,eventsArePropertyDescriptors:r,eventIsArrayMethodDescriptor:n});return}this.$emit(this.entries,[{events:e,eventsArePropertyDescriptors:r,eventIsArrayMethodDescriptor:n}])}$emit(e,r){let n=0,o=0,s=0;for(let c of e)n+=1,c.params.withPropertyDescriptors&&(o+=1),c.params.withArrayMethodDescriptors&&(s+=1);let f=[],i=[],u=[],a=[];for(let c of r){let p=c.arrayMethodName,h=c.eventsArePropertyDescriptors,d=c.eventIsArrayMethodDescriptor;for(let l of c.events)if(p&&(l.operation=p),o&&(s&&f.push(l),d||s!==n&&i.push(l)),o!==n){let x=l;if(h){let{target:b,type:y,...g}=l;x=new $(b,{type:"set",...g}),Object.defineProperty(x,"value","get"in g.value?{get:()=>g.value.get()}:{value:g.value.value}),g.oldValue&&Object.defineProperty(x,"oldValue","get"in g.oldValue?{get:()=>g.oldValue.get()}:{value:g.oldValue.value})}s&&u.push(x),d||s!==n&&a.push(x)}}for(let c of e)c.params.withPropertyDescriptors?c.params.withArrayMethodDescriptors?f.length&&c.fire(f):i.length&&c.fire(i):c.params.withArrayMethodDescriptors?u.length&&c.fire(u):a.length&&c.fire(a)}batch(e,r={}){this.batches.unshift({entries:[...this.entries],snapshots:[],params:r});let n=e();return lt(n,o=>{let s=this.batches.shift();return s.snapshots.length&&this.$emit(s.entries,s.snapshots),o})}};var jt=class extends ze{exec(e,r,n){return this.running||!this.traps[e.operation]?r(...Array.prototype.slice.call(arguments,2)):(this.running=!0,this.traps[e.operation](e,n,(...o)=>(this.running=!1,r(...o))))}};var ge=class extends Be{static getInstance(e,r=!0,n=null){return super._getInstance("traps",...arguments)}static namespace(e,r=null){return super._namespace("traps",...arguments)}addRegistration(e){return super.addRegistration(new jt(this,e))}emit(e,r=null){let n=this;return function o(s,...f){let i=n.entries[s];return i?i.exec(e,(...u)=>o(s+1,...u),...f):r?r(e,...f):f[0]}(0)}};var xn={};be(xn,{accessorize:()=>si,proxy:()=>gn,unaccessorize:()=>ii,unproxy:()=>Mt});var Io=Symbol("wqOriginal");function si(t,e,r={}){t=yn(t);let n=j(t,"accessorizedProps");function o(u){let a,c=t;do a=Object.getOwnPropertyDescriptor(c,u);while(!a&&(c=Object.getPrototypeOf(c)));return a?{proto:c,descriptor:a}:{descriptor:{value:void 0,configurable:!0,enumerable:!0,writable:!0}}}function s(u){if(n.has(u+""))return!0;let a=o(u);a.getValue=function(h=!1){return h?this.descriptor:this.descriptor.get?this.descriptor.get():this.descriptor.value},a.setValue=function(h,d=!1){if(this.dirty=!0,d){this.descriptor=h;return}return this.descriptor.set?this.descriptor.set(h)!==!1:(this.descriptor.value=h,!0)},a.intact=function(){let h=Object.getOwnPropertyDescriptor(t,u);return h?.get===p.get&&h?.set===p.set&&n.get(u+"")===this},a.restore=function(){return this.intact()?(this.proto&&this.proto!==t||!this.proto&&!this.dirty?delete t[u]:Object.defineProperty(t,u,this.descriptor),n.delete(u+""),!0):!1},n.set(isNaN(u)?u:parseInt(u),a);let{enumerable:c=!0}=a.descriptor,p={enumerable:c,configurable:!0};("value"in a.descriptor||a.descriptor.set)&&(p.set=function(h){return Ve(this,u,h,r)}),("value"in a.descriptor||a.descriptor.get)&&(p.get=function(){return ye(this,u,r)});try{return Object.defineProperty(t,u,p),!0}catch{return n.delete(u+""),!1}}let i=(Array.isArray(e)?e:e===void 0?Object.keys(t):[e]).map(s);return e===void 0||Array.isArray(e)?i:i[0]}function ii(t,e,r={}){t=yn(t);let n=j(t,"accessorizedProps");function o(i){return n.has(i+"")?n.get(i+"").restore():!0}let f=(Array.isArray(e)?e:e===void 0?Object.keys(t):[e]).map(o);return e===void 0||Array.isArray(e)?f:f[0]}function gn(t,e={},r=void 0){let n=yn(t);if(typeof e.membrane=="boolean")throw new Error("The params.membrane parameter cannot be of type boolean.");if(e.membrane&&j(n,"membraneRef").has(e.membrane))return j(n,"membraneRef").get(e.membrane);let o={apply:(i,u,a)=>Pn(i,u,a,void 0,e),construct:(i,u,a=null)=>vn(i,u,a,e),defineProperty:(i,u,a)=>Ct(i,u,a,e),deleteProperty:(i,u)=>Rt(i,u,e),get:(i,u,a=null)=>{if(u===Io)return n;let c={...e,receiver:a},p=ye(i,u,c);return Array.isArray(i)&&typeof p=="function"&&!/^class\s?/.test(Function.prototype.toString.call(p))?gn(p,{...e,arrayMethodName:u,membrane:a},r):e.chainable&&P(p)&&u!=="prototype"&&!(typeof p=="function"&&/^class\s?|\{\s\[native\scode\]\s\}$/.test(Function.prototype.toString.call(p)))?gn(p,e,r):p},getOwnPropertyDescriptor:(i,u)=>nr(i,u,e),getPrototypeOf:i=>bn(i,e),has:(i,u)=>or(i,u,e),isExtensible:i=>_n(i,e),ownKeys:i=>wn(i,e),preventExtensions:i=>En(i,e),set:(i,u,a,c=null)=>Ve(i,u,a,{...e,receiver:c}),setPrototypeOf:(i,u)=>On(i,u,e)},s=r?.(o)||o,f=new Proxy(n,s);return e.membrane&&j(n,"membraneRef").set(e.membrane,f),f}function Mt(t){return t&&t[Io]||t}function yn(t){if(!t||!P(t))throw new Error("Target must be of type object!");return Mt(t)}var Dt=class extends Array{get[Symbol.toStringTag](){return"Path"}static[Symbol.hasInstance](e){return Array.isArray(e)&&e[Symbol.toStringTag]==="Path"}};function ai(...t){return new Dt(...t)}var We=class extends Array{get[Symbol.toStringTag](){return"Subtree"}static[Symbol.hasInstance](e){return Array.isArray(e)&&e[Symbol.toStringTag]==="Subtree"}};function fi(){return new We}function ui(){return 1/0}function An(t,e,r,n=s=>s,o={}){let s=e instanceof We;if(!(!s&&!e?.length))return function f(i,u,a,c){let p=c||u[a.level]instanceof We,h=p?1/0:u[a.level],d=p?!1:a.level===u.length-1;return i instanceof $&&i.operation!=="get"?a={...a,probe:"always"}:a.probe!=="always"&&(a={...a,probe:!d}),r(i,h,(l,...x)=>{let b=m=>{m instanceof $&&(m.path="key"in m?[m.key]:[],i instanceof $&&(m.path="key"in m?i.path.concat(m.key):i.path.slice(0),Object.defineProperty(m,"context",{get:()=>i,configurable:!0})))},y=x[0]||{},g=m=>{if(m instanceof $&&"argumentsList"in m)return;let w=se(m,!1);return lt(w,_=>(m instanceof $?m.value=_:m=_,f(m,u,{...a,...y,keyInParent:m.key,level:a.level+1},p)))};if($t(h)&&Array.isArray(l)){if(l.forEach(b),d)return n(l,...x);p&&l[0]instanceof $&&(l[0].operation!=="get"||o.asGet)&&n(l,...x);for(let m of l)g(m);return}return b(l),d?n(l,...x):g(l)},a)}(t,e.slice(0),{...o,level:0},s)}function Sn(t,e,r,n={}){let o=se(t,!n.level);if(he(arguments[1])&&([,r,n={}]=arguments,e=1/0),!he(r))throw new Error(`Handler must be a function; "${ut(r)}" given!`);if(e instanceof Dt||e instanceof We)return An(o,e,Sn,r,n);if(n={...n,descripted:!0},delete n.live,!P(o))return n.probe&&ye(o,e,r,n)||void 0;let s=jo(o,e,r,n);return n.probe?ye(o,e,s,n):s()}function ci(t,e,r={}){let n=se(t);return I(e)||([,,,r={}]=arguments,e={[arguments[1]]:arguments[2]}),ge.getInstance(n,!0,r.namespace).addRegistration({traps:e,params:r})}function nr(t,e,r=o=>o,n={}){return K(t,"getOwnPropertyDescriptor",{key:e},r,n)}function li(t,e,r=o=>o,n={}){return K(t,"getOwnPropertyDescriptors",{key:e},r,n)}function bn(t,e=n=>n,r={}){return K(t,"getPrototypeOf",{},e,r)}function _n(t,e=n=>n,r={}){return K(t,"isExtensible",{},e,r)}function wn(t,e=n=>n,r={}){return K(t,"ownKeys",{},e,r)}function or(t,e,r=o=>o,n={}){return K(t,"has",{key:e},r,n)}function ye(t,e,r=o=>o,n={}){let o,s=se(t,!n.level);return I(r)?[n,r]=[r,f=>f]:n.live&&(o=!0),e instanceof Dt||e instanceof We?An(s,e,ye,r,{...n,asGet:!0}):di(s,e,f=>{let i=[...f];return function u(a,c,p){if(!c.length)return p(a);let h=c.shift();if(!["string","number","symbol"].includes(typeof h))throw new Error(`Property name/key ${h} invalid.`);function d(b,y=void 0){let g=_=>(b.value=_,u([...a,n.live||n.descripted?b:_],c,p));if(arguments.length>1)return g(y);if(!P(s))return g(s?.[b.key]);let m=j(s,"accessorizedProps",!1),w=m&&m.get(b.key);if(w&&w.intact())return g(w.getValue(n.withPropertyDescriptors));if(n.withPropertyDescriptors){let _=Object.getOwnPropertyDescriptor(s,b.key);return g(_)}return g(Reflect.get(s,b.key))}let l=new $(s,{type:"get",key:h,value:void 0,operation:"get",related:i});if(!P(s))return d(l);let x=ge.getInstance(s,!1,n.namespace);return x?x.emit(l,d):d(l)}([],f.slice(0),u=>{let a=$t(e)?u:u[0];return o&&P(s)?jo(s,e,r,n,t.key)(a):r(a)})},n)}function Tn(t,e,r={}){let n=se(t);return de.getInstance(n,!0,r.namespace).batch(e,r)}function pi(t,e,r={}){e=se(e),t=se(t);let n=(r.only||[]).slice(0),o=(r.except||[]).slice(0),s=Object.keys(r.spread?[...t]:t).map(a=>isNaN(a)?a:parseInt(a)),f=n.length?n.filter(a=>s.includes(a)):s.filter(a=>!o.includes(a)),i=a=>!Array.isArray(e)||isNaN(a)?a:a-o.filter(c=>c<a).length,u=a=>{let c=nr(t,a,r);"value"in c&&c.writable&&c.enumerable&&c.configurable?Ve(e,i(a),c.value,r):(c.enumerable||r.onlyEnumerable===!1)&&Ct(e,a,{...c,configurable:!0},r)};return Tn(e,()=>{f.forEach(u)}),Sn(t,a=>{a.filter(c=>n.length?n.includes(c.key):!o.includes(c.key)).forEach(c=>{if(c.type==="delete")return Rt(e,i(c.key),r);if(c.type==="def"){(c.value.enumerable||r.onlyEnumerable===!1)&&Ct(e,i(c.key),{...c.value,configurable:!0},r);return}u(c.key)})},{...r,withPropertyDescriptors:!0})}function Ve(t,e,r,n=f=>f,o={},s=!1){let f=se(t),i=[[e,r]];I(e)&&([,,n=a=>a,o={},s=!1]=arguments,i=Object.entries(e)),I(n)&&([s,o,n]=[typeof o=="boolean"?o:s,n,a=>a]);let u=i.map(([a])=>a);return function a(c,p,h){if(!p.length)return h(c);let[d,l]=p.shift();function x(y,g=void 0){let m=k=>(y.status=k,a(c.concat(y),p,h));if(arguments.length>1)return m(y,g);let w=j(f,"accessorizedProps",!1),_=w&&w.get(y.key);return y.type==="def"?(_&&!_.restore()&&m(!1),Object.defineProperty(f,y.key,y.value),m(!0)):_&&_.intact()?m(_.setValue(y.value)):m(Reflect.set(f,y.key,y.value))}function b(y,g){if(o.diff&&l===g)return a(c,p,h);let m=new $(f,{type:s?"def":"set",key:d,value:l,isUpdate:y,oldValue:g,related:[...u],operation:s?"defineProperty":"set",detail:o.detail}),w=ge.getInstance(f,!1,o.namespace);return w?w.emit(m,x):x(m)}return or(f,d,y=>{if(!y)return b(y);if(d==="length"&&Array.isArray(f)&&j(f).has("$length"))return b(!0,j(f).get("$length"));let g={...o,withPropertyDescriptors:s};return ye(f,d,m=>b(y,m),g)},o)}([],i.slice(0),a=>{let c=de.getInstance(f,!1,o.namespace);return c&&c.emit(a,{eventsArePropertyDescriptors:!!s}),n($t(e)?a.map(p=>p.status):a[0]?.status)})}function Ct(t,e,r,n=s=>s,o={}){return Ve(t,e,r,n,o,!0)}function hi(t,e,r=o=>o,n={}){return Ve(t,e,r,n,!0)}function Rt(t,e,r=o=>o,n={}){let o=se(t);I(r)&&([n,r]=[r,i=>i]);let s=Oe(e,!1),f=[...s];return function i(u,a,c){if(!a.length)return c(u);let p=a.shift();function h(l,x=void 0){let b=m=>(l.status=m,i(u.concat(l),a,c));if(arguments.length>1)return b(l,x);let y=j(o,"accessorizedProps",!1),g=y&&y.get(l.key);return g&&!g.restore()&&b(!1),b(Reflect.deleteProperty(o,l.key))}function d(l){let x=new $(o,{type:"delete",key:p,oldValue:l,related:[...f],operation:"deleteProperty",detail:n.detail}),b=ge.getInstance(o,!1,n.namespace);return b?b.emit(x,h):h(x)}return ye(o,p,d,n)}([],s.slice(0),i=>{let u=de.getInstance(o,!1,n.namespace);return u&&u.emit(i),r($t(e)?i.map(a=>a.status):i[0].status)})}function mi(t,e,r=o=>o,n={}){return Rt(...arguments)}function vn(t,e,r=null,n=s=>s,o={}){return K(t,"construct",arguments.length>2?{argumentsList:e,newTarget:r}:{argumentsList:e},n,o)}function Pn(t,e,r,n=s=>s,o={}){let s=Mt(e),f;if(Array.isArray(e)){if(o.arrayMethodName){let i=new $(s,{operation:o.arrayMethodName,argumentsList:r});de.getInstance(s,!1,o.namespace)?.emit([i],{eventIsArrayMethodDescriptor:!0})}j(s).set("$length",s.length),f=Tn(s,()=>K(t,"apply",{thisArgument:e,argumentsList:r},n,o),o),j(s).delete("$length")}else f=K(t,"apply",{thisArgument:s,argumentsList:r},n,o);return f}function On(t,e,r=o=>o,n={}){return K(t,"setPrototypeOf",{proto:e},r,n)}function En(t,e=n=>n,r={}){return K(t,"preventExtensions",{},e,r)}function jo(t,e,r,n={}){let o=new AbortController;rr.setMaxListeners?.(0,o.signal),n.signal&&n.signal.addEventListener("abort",()=>o.abort());let s={...n,signal:o.signal},f=de.getInstance(t,!0,s.namespace),i=new Map;return function u(a=[],c=null){let p,h,d;if($t(e)){if(c){d=!0,h=c;for(let l of a)i.get(l.key)?.remove(),i.delete(l.key)}else h=f.addRegistration(e,u,s);p={signal:h.signal,childRegistrations:i}}else c?.remove(),h=f.addRegistration(e,u,s),p={signal:h.signal};if(s.childRegistrations&&s.keyInParent&&s.childRegistrations.set(s.keyInParent,h),arguments.length){let l=r(a,p);if(arguments.length>1)return l}return o}}function K(t,e,r={},n=s=>s,o={}){t=se(t),I(n)&&([o,n]=[n,u=>u]);function s(u,a){return arguments.length>1?n(a):n((Reflect[e]||Object[e])(t,...Object.values(r)))}let f=new $(t,{operation:e,...r}),i=ge.getInstance(t,!1,o.namespace);return i?i.emit(f,s):s(f)}function $t(t){return t===1/0||Array.isArray(t)}function se(t,e=!0,r=!0){if((!t||!P(t))&&e)throw new Error(`Object must be of type object or array! "${ut(t)}" given.`);return t instanceof $&&(t.type==="def"&&r?t=typeof t.value.get=="function"?t.value.get():t.value.value:t=t.value),t&&Mt(t)}function di(t,e,r,n={}){return e===1/0?n.level&&!P(t)?r([]):r(Object.entries(Object.getOwnPropertyDescriptors(t)).filter(([,o])=>o.writable!==!1&&!o.get&&!o.set).map(([o])=>o)):r(Oe(e,!1))}var J={...In,...xn};var He=class extends sr(EventTarget){#r;#t;constructor(e,{handshake:r=0,postAwaitsOpen:n=!1}={}){if(super(),typeof r!="number")throw new Error("handshake must be a number");if(r<0||r>2)throw new Error("handshake must be between 0 and 2");if(q(this).set("options",{handshake:r,postAwaitsOpen:n}),this.#r=typeof e=="string"?new WebSocket(e):e,this.constructor.upgradeEvents(this.#r,this),this.#t=new Promise(s=>{this.#r.readyState===WebSocket.OPEN?s():this.#r.addEventListener("open",()=>s(),{once:!0})}),r===0&&this.#t.then(()=>this.start()),this.#r.readyState===WebSocket.CLOSED)try{this.close()}catch{}else this.#r.addEventListener("close",()=>{try{this.close()}catch{}},{once:!0})}static _hydrateMessage(e,r){try{let n;if(typeof r.data=="string"&&I(n=JSON.parse(r.data))&&n[".wq"])return Object.defineProperty(r,"data",{value:n,configurable:!0}),super._hydrateMessage(e,r)}catch{}return r}__postMessage(e,r){this.#t.then(()=>{this.#r.send(JSON.stringify(e),r)})}_close(){this.#r.close()}};var Mo=(t,...e)=>Pe(t,"port+",...e),q=(t,...e)=>Pe(t,"port+","meta",...e),Ge=t=>Pe(t,"port+","meta").get("options")||{},Co=["addEventListener","addRequestListener","postMessage","postRequest","dispatchEvent","relay","start","readyStateChange","removeEventListener","close"],Ro=["options","readyState","onmessage","onmessageerror"],L=class extends Do(EventTarget){constructor({handshake:e=0,postAwaitsOpen:r=!1,...n}={}){if(typeof e!="number")throw new Error("handshake must be a number");if(e<0||e>2)throw new Error("handshake must be between 0 and 2");super(),Mo(this,"meta").set("options",{handshake:e,postAwaitsOpen:r,...n})}static[Symbol.hasInstance](e){return Function.prototype[Symbol.hasInstance].call(this,e)?!0:Co.every(r=>typeof e[r]=="function")||Ro.every(r=>r in e)}};function Do(t){return class extends t{static upgradeInPlace(e,{handshake:r=0,postAwaitsOpen:n=!1}={}){if(e instanceof L)return e;if(typeof r!="number")throw new Error("handshake must be a number");if(r<0||r>2)throw new Error("handshake must be between 0 and 2");let o=this.prototype;for(let f of Co.concat("_autoStart")){let i=e[f],u=o[f];i&&Object.defineProperty(e,`_${f}`,{value:i.bind(e),configurable:!0}),Object.defineProperty(e,f,{value:u.bind(e),configurable:!0})}for(let f of Ro){let i=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(e),f),u=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(o),f);i&&Object.defineProperty(e,`_${f}`,{...i,configurable:!0}),Object.defineProperty(e,f,{...u,configurable:!0})}return Mo(e,"meta").set("options",{handshake:r,postAwaitsOpen:n}),this.upgradeEvents(e),r===0&&e.start(),e}static upgradeEvents(e,r=null){r||(r=e);let n=q(e);if(n.get("events+"))return;let o=q(r),s=Ge(r),f=Je.call(r),i=Ke.call(r);e instanceof BroadcastChannel&&(s.clientServerMode==="server"?o.set("clients",new Set):s.clientServerMode==="client"&&o.set("client_id",`client-${(0|Math.random()*9e6).toString(36)}`));let u=a=>{if(a instanceof me)return;if(e===r&&a.stopImmediatePropagation?.(),a=this._hydrateMessage?.(r,a)||a,a.data.ping==="connect"&&typeof a.data?.[".wq"]?.eventID=="string"&&(!(e instanceof WebSocket)||s.handshake)){let d=s.handshake===0||o.get("start.called"),l={isOpen:d};e instanceof BroadcastChannel&&(s.clientServerMode==="server"&&typeof a.data.id=="string"?(o.get("clients").add(a.data.id),l.id="server"):a.data.id==="server"&&o.has("client_id")&&(l.id=o.get("client_id"))),a.ports?.forEach(x=>x.postMessage(l)),d&&(o.set("remote.open.called",!0),r.start());return}if(a.data.ping==="disconnect"&&typeof a.data?.[".wq"]?.eventID=="string"){let d=()=>{o.set("remote.close.called",!0),r.close()};e instanceof BroadcastChannel?s.clientServerMode==="server"&&typeof a.data.id=="string"?(o.get("clients").delete(a.data.id),!o.get("clients").size&&s.autoClose&&!i.close.state&&d()):s.clientServerMode==="client"&&a.data.id==="server"&&d():e instanceof MessagePort&&d();return}let c=a.data,p={};typeof a.data?.[".wq"]?.eventID=="string"&&({message:c,".wq":p}=a.data);let h=new me(c,{originalTarget:e,...p,ports:a.ports});r.dispatchEvent(h)};n.set("internal_call",!0),e.addEventListener("message",u),e.addEventListener("error",u),n.delete("internal_call"),f.add(()=>{e.removeEventListener("message",u),e.removeEventListener("error",u),n.set("events+",!1)}),n.set("events+",!0)}get options(){return{...Ge(this)}}get onmessageerror(){return typeof super.onmessageerror<"u"?super.onmessageerror:typeof this._onmessageerror<"u"?this._onmessageerror:null}set onmessageerror(e){if(typeof super.onmessageerror<"u"){super.onmessageerror=e;return}if(e!==null&&typeof e!="function")throw new TypeError("onmessageerror must be a function");if(Object.getOwnPropertyDescriptor(this,"_onmessageerror")?.set){this._onmessageerror=e;return}this._onmessageerror&&this.removeEventListener("messageerror",this._onmessageerror),this.addEventListener("messageerror",e),this._onmessageerror=e}get onmessage(){return typeof super.onmessage<"u"?super.onmessage:typeof this._onmessage<"u"?this._onmessage:null}set onmessage(e){if(typeof super.onmessage<"u"){super.onmessage=e,this._autoStart();return}if(e!==null&&typeof e!="function")throw new TypeError("onmessage must be a function");if(Object.getOwnPropertyDescriptor(this,"_onmessage")?.set){this._onmessage=e,this._autoStart();return}this._onmessage&&this.removeEventListener("message",this._onmessage),this.addEventListener("message",e),this._onmessage=e,this._autoStart()}addEventListener(...e){Je.call(this).add(()=>{this._removeEventListener?this._removeEventListener(...e):super.removeEventListener(...e)});let n=this._addEventListener?this._addEventListener(...e):super.addEventListener(...e);return this._autoStart(),n}dispatchEvent(e){let r=this._dispatchEvent?this._dispatchEvent(e):super.dispatchEvent(e);return e instanceof me&&gi.call(this,e),r}postMessage(e,r={}){this._autoStart();let n=Ke.call(this);n.messaging.state=!0,n.messaging.resolve(this);let o,{portOptions:s,wqOptions:{relayedFrom:f,...i}}=ir.call(this,e,r);(i.type!=="message"||i.live||i.bubbles||s.transfer?.length&&(this instanceof BroadcastChannel||this instanceof He))&&(e={message:e,".wq":i}),r=s,o=f;let u=()=>{this._postMessage?this._postMessage(e,r,o):super.postMessage(e,r)};Ge(this).postAwaitsOpen?n.open.promise.then(u):u()}addRequestListener(e,r,n={}){let o=async s=>{let f=await r(s);for(let i of s.ports)i.postMessage(f)};this.addEventListener(e,o,n)}postRequest(e,r,n={}){let o;I(r)&&(n={once:!0,...r},o=new Promise(c=>{r=c}));let s=new MessageChannel;this.constructor.upgradeEvents(s.port1),s.port1.start();let{signal:f=null,once:i=!1,transfer:u=[],...a}=n;return s.port1.addEventListener("message",c=>r(c),{signal:f,once:i}),f?.addEventListener("abort",()=>{s.port1.close(),s.port2.close()}),this.postMessage(e,{...a,transfer:[s.port2].concat(u)}),o}relay({to:e,from:r,types:n="*",channel:o=null,resolveMessage:s=null,bidirectional:f=!1}={}){if(e&&r)throw new Error('Only one of "to" and "from" may be specified');if(r?e=this:r=this,e===r)throw new Error("Source and target ports cannot be the same");if(!(r instanceof L)||!(e instanceof L))throw new Error("Both source and target ports must be instance of MessagePortPlus.");if(typeof n!="function"&&!(n=[].concat(n)).length)throw new Error("Event types must be specified.");if(typeof o=="string")o={from:o};else if(I(o)){if(Object.keys(o).filter(c=>!["from","to"].includes(c)).length)throw new Error('Channel must be a string or an object of "from"/"to" members')}else if(o)throw new Error("Invalid channel parameter");let i=$o.call(r),u={targetPort:e,types:n,channel:o,resolveMessage:s};i.add(u);let a;return f&&(a=e.relay({to:r,types:n,channel:o&&{to:o.from,from:o.to},resolveMessage:s,bidirectional:!1})),()=>{i.delete(u),a?.()}}channel(e,r=null,{handshake:n=0,postAwaitsOpen:o=!1}={}){let s=new MessageChannel;return L.upgradeInPlace(s.port1,{handshake:n,postAwaitsOpen:o}),L.upgradeInPlace(s.port2,{handshake:n,postAwaitsOpen:o}),Je.call(this).add(this.relay({channel:e,to:s.port2,bidirectional:!0,resolveMessage:r})),s.port2.start(),this.readyStateChange("close").then(()=>{s.port2.close()}),s.port1}projectMutations({from:e,to:r,...n}){if(!e||!r||typeof e=="string"&&typeof r=="string"||P(e)&&P(r))throw new Error('Invalid "from"/"to" parameters');if(typeof e=="string"){if(!P(r))throw new Error('Invalid "to" parameter. Object/array expected');return mn.call(this,r,e,n)}if(typeof r=="string"){if(!P(e))throw new Error('Invalid "from" parameter. Object/array expected');return Lo.call(this,e,r,n)}throw new Error('Invalid "from"/"to" parameters')}get readyState(){let e=Ke.call(this);return e.close.state?"closed":e.open.state?"open":"connecting"}readyStateChange(e){if(!["open","messaging","close"].includes(e))throw new Error(`Invalid readyState query "${e}"`);return Ke.call(this)[e].promise}_autoStart(){let e=q(this),r=Ge(this);!e.get("internal_call")&&r.handshake===1&&this.start()}start(){let e=Ke.call(this);if(e.open.state)return;let r=q(this),n=Ge(this),o=a=>{a&&(e.open.state=!0,e.open.resolve(this));let c=r.get("handshake_channel");setTimeout(()=>{c?.port1.close(),c?.port2.close(),r.delete("handshake_channel")},100)};if(r.get("remote.open.called")){o(!0);return}if(r.get("start.called"))return;if(r.set("start.called",!0),this._start?this._start():super.start?.(),n.handshake===0){o(!0);return}let s=new MessageChannel;r.set("handshake_channel",s),s.port1.onmessage=a=>{this instanceof BroadcastChannel&&n.clientServerMode==="server"&&typeof a.data?.id=="string"&&r.get("clients").add(a.data.id),a.data?.isOpen,o(!0)};let{wqOptions:f}=ir.call(this),i=n.clientServerMode==="server"?"server":n.clientServerMode==="client"?r.get("client_id"):null,u={".wq":f,ping:"connect",id:i};this._postMessage?this._postMessage(u,{transfer:[s.port2]}):super.postMessage(u,{transfer:[s.port2]})}close(...e){let r=Ke.call(this);if(r.close.state)return;r.close.state=!0;let n=q(this),o=Ge(this);if(o.handshake>0&&!n.get("remote.close.called")&&(this instanceof BroadcastChannel||this instanceof MessagePort)){let{wqOptions:s}=ir.call(this),f=o.clientServerMode==="server"?"server":o.clientServerMode==="client"?n.get("client_id"):null,i={".wq":s,ping:"disconnect",id:f};this._postMessage?this._postMessage(i):super.postMessage(i)}this._close?this._close(...e):super.close(...e),r.close.resolve(this),yi.call(this)}}}function sr(t){return class extends Do(t){static _hydrateMessage(e,r){if(typeof r.data?.[".wq"]?.numPorts!="number"||typeof r.data[".wq"].eventID!="string")return r;let n=Je.call(e),o=r.data[".wq"].numPorts;Object.defineProperty(r,"ports",{value:[],configurable:!0});for(let s=0;s<o;s++){let f=e.channel(`${r.data[".wq"].eventID}:${s}`);r.ports.push(f)}return r}_postMessage(e,r={}){let{transfer:n=[],...o}=r;if(typeof e?.[".wq"]?.eventID=="string"){let s=Je.call(this),f=n.filter(u=>u instanceof MessagePort),i=f.length;for(let u=0;u<i;u++)L.upgradeInPlace(f[u]),s.add(this.relay({channel:`${e[".wq"].eventID}:${u}`,to:f[u],bidirectional:!0})),f[u].start(),f[u].readyStateChange("close").then(()=>{let{wqOptions:a}=ir.call(this),c={".wq":a,ping:"disconnect"};this.postMessage(c,{type:`${e[".wq"].eventID}:${u}:message`})});e[".wq"].numPorts=i}return this.__postMessage(e,o)}}}function gi(t){if(t.propagationStopped)return;let e=q(this);e.get("parentNode")instanceof EventTarget&&(t.bubbles||e.get("parentNode")?.findPort?.(n=>n===this)&&t instanceof me)&&e.get("parentNode").dispatchEvent(t);let r=$o.call(this);if(r.size&&t instanceof me){let{type:n,eventID:o,data:s,live:f,bubbles:i,ports:u}=t,a=new WeakSet;for(let{targetPort:c,types:p,channel:h,resolveMessage:d}of r){if(a.has(c))continue;let l=n;h.from&&([,l]=new RegExp(`^${h.from.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}:([^:]+)$`).exec(n)||[],!l)||!(typeof p=="function"?p(l,this,c,h):[].concat(p).find(b=>b===l||b==="*"))||(a.add(c),c.postMessage(d?d(s,this,c,h):s,{transfer:u,type:h.to?`${h.to}:${l}`:l,eventID:o,bubbles:i,live:f,forwarded:!0,relayedFrom:this}))}}}function Je(){let t=q(this);return t.has("garbage_collection")||t.set("garbage_collection",new Set),t.get("garbage_collection")}function $o(){let t=q(this);return t.has("downstream_registry")||t.set("downstream_registry",new Set),t.get("downstream_registry")}function Ke(){let t=q(this);if(!t.has("readystate_registry")){let e=r=>(r.promise=new Promise((n,o)=>(r.resolve=n,r.reject=o)),r);t.set("readystate_registry",{open:e({}),messaging:e({}),close:e({})})}return t.get("readystate_registry")}function yi(){let t=q(this);for(let e of t.get("garbage_collection")||[])e instanceof AbortController?e.abort():typeof e=="function"&&e();t.get("garbage_collection")?.clear(),t.get("downstream_registry")?.clear()}function ir(t=void 0,e={}){if(Array.isArray(e))e={transfer:e};else if(!e||typeof e!="object")throw new TypeError("transferOrOptions must be an array or an object");let{type:r="message",eventID:n=null,live:o=!1,observing:s=!1,bubbles:f=!1,forwarded:i=!1,relayedFrom:u=null,signal:a=null,withArrayMethodDescriptors:c=!1,honourDoneMutationFlags:p=!1,...h}=e;return n||(n=`${r}-${(0|Math.random()*9e6).toString(36)}`),!s&&!i&&P(t)&&o&&!r?.endsWith(".mutate")&&(Lo.call(this,t,n,{signal:a,withArrayMethodDescriptors:c,honourDoneMutationFlags:p}),s=!0),{portOptions:h,wqOptions:{type:r,eventID:n,live:o,observing:s,honourDoneMutationFlags:p,bubbles:f,forwarded:i,relayedFrom:u}}}function Lo(t,e,{signal:r,withArrayMethodDescriptors:n=!0,honourDoneMutationFlags:o=!1}={}){if(!P(t))throw new TypeError("data must be a plain object and not a stream");if(typeof e!="string")throw new TypeError("eventID must be a non-empty string");let s=u=>{let a;n&&Array.isArray(u[0].target)&&!u[0].argumentsList&&!["set","defineProperty","deleteProperty"].includes(u[0].operation)||(this.postMessage(u.map(c=>(a=!a&&o&&c.detail?.done,{...c,target:void 0})),{type:`${e}.mutate`}),a&&f.abort())},f=J.observe(t,J.subtree(),s,{signal:r,withArrayMethodDescriptors:n});return Je.call(this).add(f),f}function mn(t,e,{signal:r,honourDoneMutationFlags:n=!1}={}){if(!P(t))throw new TypeError("data must be a plain object and not a stream");if(typeof e!="string")throw new TypeError("eventID must be a non-empty string");let o=i=>{if(!i.data?.length)return;let u;J.batch(t,()=>{for(let a of i.data){if(u=!u&&n&&a.detail?.done,a.argumentsList){let c=a.path.length?J.get(t,J.path(...a.path)):t;J.proxy(c)[a.operation](...a.argumentsList);continue}if(a.key!=="length"||["set","defineProperty","deleteProperty"].includes(a.operation)){let c=a.path.length===1?t:J.get(t,J.path(...a.path.slice(0,-1)));a.type==="delete"?J.deleteProperty(c,a.key):J.set(c,a.key,a.value)}}}),u&&s()};this.addEventListener(`${e}.mutate`,o,{signal:r});let s=()=>this.removeEventListener(`${e}.mutate`,o);return Je.call(this).add(s),s}var Lt=class extends sr(BroadcastChannel){constructor(e,{handshake:r=0,postAwaitsOpen:n=!1,clientServerMode:o=null,autoClose:s=!1}={}){super(e);let f=q(this);if(typeof r!="number")throw new Error("handshake must be a number");if(r<0||r>2)throw new Error("handshake must be between 0 and 2");if(o&&!["server","client"].includes(o))throw new Error('clientServerMode must be "server" or "client"');f.set("options",{handshake:r,postAwaitsOpen:n,clientServerMode:o,autoClose:s}),this.constructor.upgradeEvents(this),r===0&&this.start()}__postMessage(e,r){BroadcastChannel.prototype.postMessage.call(this,e)}};var ar=class t extends EventTarget{static get xHeaderName(){return"X-Message-Port"}static test(e){return e instanceof t||e?.[Symbol.toStringTag]==="LiveResponse"?"LiveResponse":e?.[Symbol.toStringTag]==="LiveProgramHandle"?"LiveProgramHandle":e instanceof Response?"Response":bi(e)?"Generator":"Default"}static hasPort(e){return!!R(e).get("port")||!!e.headers?.get?.(this.xHeaderName)?.trim()}static getPort(e,{handshake:r=1}={}){if(!/Response/.test(this.test(e)))return;let n=R(e);if(!n.has("port")){let o=e.headers.get(this.xHeaderName)?.trim();if(!o)return;let[,s,f]=/^(socket|channel):\/\/(.*)$/.exec(o)||[];if(!s||!f)throw new Error(`Unknown port messaging protocol: ${o}`);let i=s==="channel"?new Lt(f,{handshake:r,postAwaitsOpen:!0,clientServerMode:"client"}):new He(f,{handshake:r,postAwaitsOpen:!0});n.set("port",i)}return n.get("port")}static attachPort(e,r){if(r&&!(r instanceof L))throw new Error("Client must be a MessagePortPlus interface");R(e).set("port",r)}static from(e,...r){return this.test(e)==="LiveResponse"?e.clone(...r):new this(e,...r)}[Symbol.toStringTag]="LiveResponse";#r;constructor(e,...r){super(),this.#r=B.getInstance(this,!0);let o=pt.call(this).now;this.#u(o,e,...r).catch(s=>{o.reject(s)})}#t=null;get body(){return this.#t}#n=!1;get concurrent(){return this.#n}get bodyUsed(){return!0}#e=new Headers;get headers(){return this.#e}#s=200;get status(){return this.#s}#a="";get statusText(){return this.#a}#i="basic";get type(){return this.#i}#f=!1;get redirected(){return this.#f}#h=null;get url(){return this.#h}get ok(){return this.#s>=200&&this.#s<299}async now(){return pt.call(this).now.promise}#l;get port(){return this.#l}#o=new AbortController;#p=new AbortController;get readyState(){let e=pt.call(this);return e.done.state?"done":e.live.state?"live":"waiting"}readyStateChange(e){if(!["live","now","done"].includes(e))throw new Error(`Invalid readyState query "${e}"`);return pt.call(this)[e].promise}disconnect(e=!1){this.#o.abort(),this.#o=new AbortController,e&&(this.#p.abort(),this.#p=new AbortController)}#d;#g(e){let r=pt.call(this);if(r.done.state)throw new Error("Response already done.");return this.#d=e,e.then(n=>{this.#d===e&&(this.#d=null,r.done.state=!0,r.done.resolve(n))}).catch(n=>{this.#d===e&&(this.#d=null,r.done.state=!0,r.done.reject(n))}),e}async replaceWith(e,...r){if(this.readyState==="done")throw new Error("Response already done.");this.disconnect(),await this.#u(null,e,...r)}async#u(e,r,...n){let o=pt.call(this),s=e||o.now.refresh();if(r instanceof Promise)return this.#g(new Promise((d,l)=>{this.#o.signal.addEventListener("abort",()=>{s.aborted=!0,d()}),r.then(async x=>{await this.#u(s,x,...n),d()}).catch(x=>l(x))}));let f=(d,l)=>{if(l=Object.freeze({...l,ok:l.status>=200&&l.status<299,bodyUsed:!0}),d?.aborted){d.resolve(l);return}let x=d||o.now.refresh(),b=l.body;this.#s=l.status,this.#a=l.statusText;for(let[m]of[...this.#e.entries()])this.#e.delete(m);for(let[m,w]of l.headers.entries())this.#e.append(m,w);this.#i=l.type,this.#f=l.redirected,this.#h=l.url;let y=this.#t;this.#t=b,this.#n=!!l.concurrent,this.#l=l.port,this.#n||(this.#p.abort(),this.#p=new AbortController);let g=new C(this,{type:"set",key:"body",value:b,oldValue:y,isUpdate:!0,related:[],operation:"set",detail:null});o.live.state=!0,o.live.resolve(this),x.resolve(l),this.#r.emit([g]),this.dispatchEvent(new jn(l))},i=(d,l,x)=>{f(d,{body:l,status:200,statusText:"",...x,headers:x.headers instanceof Headers?x.headers:new Headers(x.headers||{}),type:"basic",redirected:!1,url:null})},u=async(d,l,x)=>{let b,y,g=!0;if(l instanceof Response){try{b=await ne.prototype.any.call(l,{to:"json"})}catch{g=!1,b=await ne.prototype.any.call(l)}y=this.constructor.getPort(l,{handshake:2})}else b=(await l.readyStateChange("live")).body,y=l.port;if(f(d,{body:b,status:l.status,statusText:l.statusText,headers:l.headers,concurrent:l.concurrent,...x,port:y,type:l.type,redirected:l.redirected,url:l.url}),this.constructor.test(l)==="LiveResponse"){let m=()=>{i(null,l.body,l)};return l.addEventListener("replace",m,{signal:this.#o.signal}),await l.readyStateChange("done"),l.removeEventListener("replace",m),l}if(y){g&&y.projectMutations({from:"initial_response",to:b,signal:this.#p.signal});let m=new Promise(w=>{let _=k=>{let{body:X,...N}=k.data;i(null,X,{...N})};y.addEventListener("response.replace",_,{signal:this.#o.signal}),y.addEventListener("response.done",()=>{y.removeEventListener("response.replace",_),w(this)},{once:!0}),y.readyStateChange("close").then(w)});return y.start(),m}},a=async(d,l,x)=>{let b=await l.next(),y=await b.value;await this.#u(d,y,{done:b.done,...x});let g=b,m=y;for(;!g.done&&!this.#o.signal.aborted;)g=await l.next(),m=await g.value,this.#o.signal.aborted||await this.#u(null,m,{concurrent:x.concurrent,done:x.done===!1?!1:g.done})},c=async(d,l,x)=>(await this.#u(d,l.value,x),Tt.observe(l,"value",b=>this.#u(null,b.value,{concurrent:x.concurrent,done:!1}),{signal:this.#o.signal}),new Promise(()=>{})),p=typeof n[0]=="function"?n.shift():null,h=E(n[0])?{...n.shift()}:{};if("status"in h&&(h.status=parseInt(h.status),h.status<200||h.status>599))throw new Error(`The status provided (${h.status}) is outside the range [200, 599].`);if("statusText"in h&&(h.statusText=String(h.statusText)),h.headers&&!(h.headers instanceof Headers)&&(h.headers=new Headers(h.headers)),"concurrent"in h&&(h.concurrent=!!h.concurrent),/Response/.test(this.constructor.test(r))){if(p)throw new Error("frameClosure is not supported for responses.");s.donePromise=u(s,r,h)}else if(this.constructor.test(r)==="Generator"){if(p)throw new Error("frameClosure is not supported for generators.");s.donePromise=a(s,r,h)}else if(this.constructor.test(r)==="LiveProgramHandle"){if(p)throw new Error("frameClosure is not supported for live program handles.");s.donePromise=c(s,r,h)}else if(s.donePromise=Promise.resolve(i(s,r,h)),p){let d=O(r)&&!Hr(r)?Tt.proxy(r,{chainable:!0,membrane:r}):r;s.donePromise=Promise.resolve(p.call(this,d,this.#p.signal))}return this.#g(h.done===!1?new Promise(()=>{}):s.donePromise),await new Promise((d,l)=>{this.#o.signal.addEventListener("abort",()=>d(!1)),s.donePromise.then(()=>d(!0)).catch(l)})}toResponse({port:e,signal:r}={}){if(e&&!(e instanceof L))throw new Error("Client must be a MessagePortPlus interface");let n=ne.from(this.body,{status:this.#s,statusText:this.#a,headers:this.#e}),o=R(this);if(Le(n).set("meta",new Map(o)),!e)return n;O(this.#t)&&!Hr(this.#t)&&e.projectMutations({from:this.#t,to:"initial_response",signal:AbortSignal.any([this.#p.signal].concat(r||[]))});let s=()=>{let f=Object.fromEntries([...this.headers.entries()]);f?.["set-cookie"]&&(delete f["set-cookie"],console.warn('Warning: The "set-cookie" header is not supported for security reasons and has been removed from the response.')),e.postMessage({body:this.#t,status:this.#s,statusText:this.#a,headers:f,type:this.type,url:this.url,redirect:this.redirect,concurrent:this.#n},{type:"response.replace",live:!0,signal:AbortSignal.any([this.#p.signal].concat(r||[]))})};return this.addEventListener("replace",s,{signal:r}),this.readyStateChange("done").then(()=>{e.postMessage(null,{type:"response.done"})}),n}async*toGenerator({signal:e}={}){do yield this.body;while(await new Promise(r=>{this.addEventListener("replace",()=>r(!0),{once:!0,signal:e}),this.readyStateChange("done").then(()=>r(!1))}))}toLiveProgramHandle({signal:e}={}){let r=new Mn,n=()=>Tt.defineProperty(r,"value",{value:this.body,enumerable:!1,configurable:!0});return this.addEventListener("replace",n,{signal:e}),n(),r}clone(e={}){let r=new this.constructor,n=R(this);return Le(r).set("meta",new Map(n)),r.replaceWith(this,e),r}},bi=t=>typeof t?.next=="function"&&typeof t?.throw=="function"&&typeof t?.return=="function";function pt(){let t=R(this);if(!t.has("readystate_registry")){let e=n=>(n.promise=new Promise((o,s)=>(n.resolve=o,n.reject=s)),n),r={live:e({}),done:e({})};(function n(){return r.now=e({}),r.now.refresh=n,r.now})(),t.set("readystate_registry",r)}return t.get("readystate_registry")}var jn=class extends Event{#r;get data(){return this.#r}constructor(e){super("replace"),this.#r=e}},Mn=class{[Symbol.toStringTag]="LiveProgramHandle";abort(){}};globalThis.webqit||(globalThis.webqit={});Object.assign(globalThis.webqit,Cn);})();
//# sourceMappingURL=main.js.map
